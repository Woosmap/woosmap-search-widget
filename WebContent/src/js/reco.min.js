!function(){function e(e,o){this.manager,this.ui,o||(o={});var t=o.lang&&"string"==typeof o.lang?o.lang:wgs.genericreco.options.lang;t&&(wgs.genericreco.L10n=o.translations&&o.translations.hasOwnProperty(t)?$.extend(wgs.genericreco.options.translations[t],o.translations[t]):wgs.genericreco.options.translations[t]),wgs.genericreco.options=$.extend(wgs.genericreco.options,o),wgs.genericreco.options.container=e;var n=void 0==wgs.genericreco.options.usePlaces?!0:wgs.genericreco.options.usePlaces;wgs.genericreco.CONSTANT.debug&&(console.log(wgs.genericreco.options),console.log(wgs.genericreco.L10n),console.log(n)),this.scriptsLoader=new wgs.genericreco.ScriptsLoader(wgs.genericreco.options.google.clientId,wgs.genericreco.options.google.channel,wgs.genericreco.options.google.key);var s=this;window.jQuery?window.jQuery(document).ready(function(){s.scriptsLoader.loadGoogleMaps("googleMapsLoaded")}):this.scriptsLoader.loadJQuery(function(){s.scriptsLoader.loadGoogleMaps("googleMapsLoaded")}),googleMapsLoaded=function(){i()};var i=function(){s.manager=new wgs.genericreco.Manager(s),s.ui=new wgs.genericreco.UI(e,n,s)}}function o(e){this.reco,this.plugin=e;var o=this,t=function(){o.reco=new wgs.genericreco.WoosmapReco({limit:wgs.genericreco.options.woosmap.limit}),o.reco.setProjectKey(wgs.genericreco.options.woosmapKey),o.initialRecommendation()};t()}function t(e,o,t){this.googleClientId=e,this.googleChannel=o,this.googleKey=t}function n(e){this.limit=e.limit,this.queue=rRequestQueue=[]}function s(e){this.drives=[],this.stores=e}function i(e,o){this.container=e,this.plugin=o;var t={HTTPS:"Votre position géographique n’a pas été renvoyée par votre navigateur. Veuillez saisir une adresse pour rechercher les magasins à proximité.",BLOCKED:"La géolocalisation n'est pas activée sur votre navigateur. Veuillez saisir une adresse pour rechercher les magasins à proximité."},n=this,s=function(){var e='<div class="gr-wgs-homestore-panel-searchBlock-btn gr-wgs-homestore-panel-aroundMe-btn">'+wgs.genericreco.L10n.searchAroundMeBtn+"</div>";n.container.append(e)},i=function(e){lat=e.coords.latitude,lng=e.coords.longitude,n.plugin.manager.HTML5Recommendation(lat,lng)},r=function(e){n.plugin.ui.slideDownWarningHTML5(e&&e.message&&0==e.message.indexOf("Only secure origins are allowed")?t.HTTPS:t.BLOCKED)},c=function(){n.container.find(".gr-wgs-homestore-panel-aroundMe-btn").click(function(){navigator.geolocation.getCurrentPosition(i,r)})},a=function(){s(),c()};a()}function r(e,o){this.plugin=o,this.container=e,this.containerResultsList,this.buildHTML()}function c(e,o){this.plugin=o,this.container=e,this.containerPredictionsList,this.buildHTML()}function a(e,o,t){this.plugin=t,this.container=window.jQuery(e),this.isSearchBuild=!1;var n='<div class="gr-wgs-homestore-container"><div class="gr-wgs-homestore-mainBlock"></div><div id="gr-wgs-homestore-panel"><div class="gr-wgs-homestore-panel-searchBlock"><div class="gr-wgs-homestore-panel-searchBlock-warning">'+wgs.genericreco.L10n.geolocationNotice+'</div></div><div class="gr-wgs-homestore-panel-loaderBlock"></div><div class="gr-wgs-homestore-panel-resultBlock"><div class="gr-wgs-homestore-panel-resultBlock-title">'+wgs.genericreco.L10n.selectAroundMeTitle+'</div><ul class="gr-wgs-homestore-panel-resultBlock-listBlock"></ul></div><div class="gr-wgs-homestore-panel-footerBlock"><div class="gr-wgs-homestore-panel-footerBlock-allStores">'+wgs.genericreco.L10n.allStores+'</div><div class="gr-wgs-homestore-panel-footerBlock-closePanel">'+wgs.genericreco.L10n.closeBtn+"</div></div>";this.container.empty().html(n),this.windowContainer=window.jQuery(window),this.mainContainer=window.jQuery(".gr-wgs-homestore-container"),this.headerContainer=window.jQuery(".gr-wgs-homestore-mainBlock"),this.panelContainer=window.jQuery("#gr-wgs-homestore-panel"),this.panelContainerSearch=window.jQuery(".gr-wgs-homestore-panel-searchBlock"),this.panelContainerSearchWarning=window.jQuery(".gr-wgs-homestore-panel-searchBlock-warning"),this.panelContainerResultsBlock=window.jQuery(".gr-wgs-homestore-panel-resultBlock"),this.panelContainerResultsList=window.jQuery(".gr-wgs-homestore-panel-resultBlock-listBlock"),this.panelContainerFooter=window.jQuery(".gr-wgs-homestore-panel-footerBlock"),new wgs.genericreco.HTML5Location(this.panelContainerSearch,this.plugin),o?new wgs.genericreco.PlacesLocation(this.panelContainerSearch,this.plugin):new wgs.genericreco.GeocodingLocation(this.panelContainerSearch,this.plugin),this.hideResultsBlock(),this.hideWarningHTML5();var s=this;this.panelContainer.find(".gr-wgs-homestore-panel-footerBlock-allStores").click(function(){s.openAllStores()}),this.panelContainer.find(".gr-wgs-homestore-panel-footerBlock-closePanel").click(function(){s.hideSearchPanel()}),this.onClickOutsideContainer()}window.wgs=window.wgs||{},wgs.genericreco={},wgs.genericreco.CONSTANT={debug:!1},wgs.genericreco.options={container:"",woosmapKey:"woos-27e715eb-6454-3019-95c1-e90a418939a9",google:{key:"",clientId:"gme-srssocietederecherches",channel:"norauto-fr-homepage-woosreco"},urls:{store:{target:"_self"},stores:{href:"https://centres.norauto.fr/",target:"_self"}},usePlaces:!0,autocompletePlaces:{minLength:2,bounds:{west:-4.8729347,north:51.089062,south:42.19809198,east:8.332631},types:["geocode"]},woosmap:{reco:{query:""},limit:10},lang:"fr",translations:{fr:{searchAroundMeBtn:"Autour de moi",searchAroundMeTitle:"Rechercher le centre à proximité",selectAroundMeTitle:"Choisissez le centre à proximité :",autocompletePlaceholder:"Spécifiez une adresse",allStores:"Tous nos centres",changeStore:"Centre à proximité",findStore:"Choisir mon centre",geolocationNotice:"La géolocalisation n'est pas activée sur votre navigateur. Veuillez changez vos préférences.",closeBtn:"Fermer"}}},wgs.genericreco.L10n={},wgs.genericreco.RecommendationPlugin=e,wgs.genericreco.Manager=o,wgs.genericreco.Manager.prototype.initialRecommendation=function(){var e=this;e.reco.getUserRecommendation(function(o){if(wgs.genericreco.CONSTANT.debug&&console.log(o),o&&o.features&&o.features.length>0){var t=new wgs.genericreco.Stores(o.features),n=t.getStores();n.splice(1,n.length),e.plugin.ui.buildHTMLInitialReco(n[0])}else e.plugin.ui.buildHTMLFindMyDrive()})},wgs.genericreco.Manager.prototype.HTML5Recommendation=function(e,o){var t=this;t.plugin.ui.showLoader(),t.reco.sendUserHtml5Position(e,o,function(){t.reco.getUserRecommendation(function(e){var o=new wgs.genericreco.Stores(e.features);t.reco.getUserPosition(function(e){o.updateStoresWithGoogle(e,function(){var e=o.sortWithGoogle();e.splice(wgs.genericreco.options.woosmap.limit,e.length),t.plugin.ui.hideLoader(),t.plugin.ui.buildHTMLRecommendationResults(e)},function(){t.plugin.ui.hideLoader()})})})},function(){t.plugin.ui.hideLoader(),console.log("Error recommendation")})},wgs.genericreco.Manager.prototype.SearchedRecommendation=function(e,o){var t=this;t.plugin.ui.showLoader(),t.reco.sendUserSearchedPosition(e,o,function(){t.reco.getUserRecommendation(function(e){var o=new wgs.genericreco.Stores(e.features);t.reco.getUserPosition(function(e){o.updateStoresWithGoogle(e,function(){var e=o.sortWithGoogle();e.splice(wgs.genericreco.options.woosmap.limit,e.length),t.plugin.ui.hideLoader(),t.plugin.ui.buildHTMLRecommendationResults(e)},function(){t.plugin.ui.hideLoader()})})})},function(){t.plugin.ui.hideLoader(),console.log("Error recommendation")})},wgs.genericreco.Manager.prototype.SearchedStores=function(e,o){var t=this;t.plugin.ui.showLoader(),t.reco.sendUserSearchedPosition(e,o,function(){t.reco.searchStores(e,o,function(n){var s=new wgs.genericreco.Stores(n.features);s.updateStoresWithGoogle({latitude:e,longitude:o},function(){var e=s.sortWithGoogle();e.splice(wgs.genericreco.options.woosmap.limit,e.length),t.plugin.ui.hideLoader(),t.plugin.ui.buildHTMLRecommendationResults(e)},function(){t.plugin.ui.hideLoader()})},function(){t.plugin.ui.hideLoader()})},function(){t.plugin.ui.hideLoader(),console.log("Error recommendation")})},wgs.genericreco.ScriptsLoader=t,wgs.genericreco.ScriptsLoader.prototype.loadGoogleMaps=function(e){var o=document.createElement("script");o.async=!1,o.type="text/javascript",o.src="//maps.googleapis.com/maps/api/js?"+(this.googleClientId?"&client="+this.googleClientId:"")+(this.googleChannel?"&channel="+this.googleChannel:"")+(this.googleKey?"&key="+this.googleKey:"")+"&libraries=places&callback="+e,document.documentElement.firstChild.appendChild(o)},wgs.genericreco.ScriptsLoader.prototype.loadJQuery=function(e){var o=document.createElement("script");o.async=!0,o.src="//code.jquery.com/jquery-2.x-git.min.js",o.readyState?o.onreadystatechange=function(){("loaded"==o.readyState||"complete"==o.readyState)&&(o.onreadystatechange=null,e())}:o.onload=function(){e()},document.documentElement.firstChild.appendChild(o)},wgs.genericreco.WoosmapReco=n,wgs.genericreco.WoosmapReco.prototype.setProjectKey=function(e){this.queue.push(["setProjectKey",[e]])},wgs.genericreco.WoosmapReco.prototype.searchStores=function(e,o,t){this.queue.push(["searchStores",[{successCallback:t,lat:e,lng:o,storesByPage:this.limit,query:wgs.genericreco.options.woosmap.reco.query}]])},wgs.genericreco.WoosmapReco.prototype.getUserRecommendation=function(e){this.queue.push(["getUserRecommendation",[{successCallback:e,limit:this.limit,query:wgs.genericreco.options.woosmap.reco.query}]])},wgs.genericreco.WoosmapReco.prototype.getUserPosition=function(e){this.queue.push(["getUserPosition",[{successCallback:e}]])},wgs.genericreco.WoosmapReco.prototype.sendUserHtml5Position=function(e,o,t,n){this.sendPosition("sendUserHtml5Position",e,o,t,n)},wgs.genericreco.WoosmapReco.prototype.sendUserSearchedPosition=function(e,o,t,n){this.sendPosition("sendUserSearchedPosition",e,o,t,n)},wgs.genericreco.WoosmapReco.prototype.sendUserConsultedPOI=function(e,o,t,n,s){this.sendPosition("sendUserConsultedPOI",e,o,n,s,t)},wgs.genericreco.WoosmapReco.prototype.sendUserFavoritedPOI=function(e,o,t,n,s){this.sendPosition("sendUserFavoritedPOI",e,o,n,s,t)},wgs.genericreco.WoosmapReco.prototype.sendPosition=function(e,o,t,n,s,i){var r={lat:o,lng:t,successCallback:n,errorCallback:s};i&&(r.id=i),this.queue.push([e,[r]])},wgs.genericreco.Stores=s,wgs.genericreco.Stores.prototype.getStores=function(){return this.stores},wgs.genericreco.Stores.prototype.updateStoresWithGoogle=function(e,o,t){for(var n=new google.maps.DistanceMatrixService,s=[new google.maps.LatLng(e.latitude,e.longitude)],i=[],r=0;r<this.stores.length;r++){var c=this.stores[r].geometry.coordinates;i.push(new google.maps.LatLng(c[1],c[0]))}var a={destinations:i,origins:s,travelMode:google.maps.TravelMode.DRIVING};wgs.genericreco.CONSTANT.debug&&(console.log("PLACES AUTOCOMPLETE REQUEST :"),console.log(a));var l=this;n.getDistanceMatrix(a,function(n,s){if(s==google.maps.DistanceMatrixStatus.OK){for(var i=n.rows[0].elements,r=0;r<l.stores.length;r++)l.stores[r].properties.distanceWithGoogle=i[r].distance.value;o()}else s==google.maps.DistanceMatrixStatus.UNKNOWN_ERROR?window.setTimeout(function(){l.updateStoresWithGoogle(e,o,t)},1500):(t(),console.log(s))})},wgs.genericreco.Stores.prototype.sortWithGoogle=function(){return this.stores.sort(function(e,o){return e.properties.distanceWithGoogle<o.properties.distanceWithGoogle?-1:1}),this.stores},wgs.genericreco.HTML5Location=i,wgs.genericreco.GeocodingLocation=r,wgs.genericreco.GeocodingLocation.prototype.buildHTML=function(){var e='<div class="gr-wgs-homestore-panel-address-wrapper"><label>'+wgs.genericreco.L10n.searchAroundMeTitle+'</label><form class="gr-wgs-homestore-panel-searchBlock-form"><input class="gr-wgs-homestore-panel-searchBlock-btn gr-wgs-homestore-panel-address-btn" type="text" placeholder="'+wgs.genericreco.L10n.autocompletePlaceholder+'"/></form><div class="gr-wgs-homestore-panel-address-reset"></div></div><div class= "gr-wgs-homestore-panel-address-results pac-container"></div>';this.container.append(e),this.containerResultsList=window.jQuery(".gr-wgs-homestore-panel-address-results");var o=this;o.container.find("input").bind("keyup",function(e){13==e.keyCode?0==o.containerResultsList.find(".pac-item").length?o.geocode(window.jQuery(this).val()):o.containerResultsList.find(".pac-item-selected").length>0?o.containerResultsList.find(".pac-item-selected").trigger("click"):o.containerResultsList.find(".pac-item").first().trigger("click"):38==e.keyCode?o.containerResultsList.find(".pac-item-selected").length>0?(o.containerResultsList.find(".pac-item-selected").prev().addClass("pac-item-selected"),o.containerResultsList.find(".pac-item-selected:last").removeClass("pac-item-selected")):o.containerResultsList.find(".pac-item:last").addClass("pac-item-selected"):40==e.keyCode&&(o.containerResultsList.find(".pac-item-selected").length>0?(o.containerResultsList.find(".pac-item-selected").next().addClass("pac-item-selected"),o.containerResultsList.find(".pac-item-selected:first").removeClass("pac-item-selected")):o.containerResultsList.find(".pac-item:first").addClass("pac-item-selected"))}),o.containerResultsList.delegate(".pac-item","click",function(){var e=window.jQuery(this).attr("data-lat"),t=window.jQuery(this).attr("data-lng"),n=window.jQuery(this).find(".pac-item-query").text();o.container.find("input").val(n),o.askForStores(e,t),o.containerResultsList.hide()}),window.jQuery(".gr-wgs-homestore-panel-address-reset").click(function(){o.container.find("input").val(""),o.containerResultsList.empty().hide(),o.plugin.ui.hideResultsBlock()}),this.container.find("form.gr-wgs-homestore-panel-searchBlock-form").submit(function(){return!1})},wgs.genericreco.GeocodingLocation.prototype.buildHTMLResults=function(e){var o=this,t=function(e){var t=e.geometry.location,n='<div class="pac-item" data-lat="'+t.lat()+'" data-lng="'+t.lng()+'"><span class="pac-icon pac-icon-marker"></span><span class="pac-item-query">'+e.formatted_address+"</span></div>";o.containerResultsList.append(n)};this.containerResultsList.empty().show();for(var n=0;n<e.length;n++)t(e[n])},wgs.genericreco.GeocodingLocation.prototype.askForRecommendation=function(e,o){this.plugin.manager.SearchedRecommendation(e,o)},wgs.genericreco.GeocodingLocation.prototype.askForStores=function(e,o){this.plugin.manager.SearchedStores(e,o)},wgs.genericreco.GeocodingLocation.prototype.geocode=function(e){var o={address:e,region:"fr"},t=new google.maps.Geocoder,n=this;t.geocode(o,function(o,t){if(t==google.maps.GeocoderStatus.UNKNOWN_ERROR)n.geocode(e);else if(t==google.maps.GeocoderStatus.OK)if(1==o.length){n.container.find(".gr-wgs-homestore-panel-searchBlock-btn").val(o[0].formatted_address);var s=o[0].geometry.location;n.askForStores(s.lat(),s.lng())}else n.buildHTMLResults(o);else console.log(t)})},wgs.genericreco.PlacesLocation=c,wgs.genericreco.PlacesLocation.prototype.buildHTML=function(){var e='<div class="gr-wgs-homestore-panel-address-wrapper"><label>'+wgs.genericreco.L10n.searchAroundMeTitle+'</label><form class="gr-wgs-homestore-panel-searchBlock-form"><input class="gr-wgs-homestore-panel-searchBlock-btn gr-wgs-homestore-panel-address-btn" type="text" placeholder="Spécifiez une adresse"/></form><div class="gr-wgs-homestore-panel-address-reset"></div></div><div class= "gr-wgs-homestore-panel-address-predictions pac-container"></div>';this.container.append(e),this.containerPredictionsList=window.jQuery(".gr-wgs-homestore-panel-address-predictions");var o=this;o.container.find("input").bind("keyup",function(e){if(13==e.keyCode)$(".pac-item-selected").length>0?$(".pac-item-selected").trigger("click"):$(".pac-item").first().trigger("click");else if(38==e.keyCode)$(".pac-item-selected").length>0?($(".pac-item-selected").prev().addClass("pac-item-selected"),$(".pac-item-selected:last").removeClass("pac-item-selected")):$(".pac-item:last").addClass("pac-item-selected");else if(40==e.keyCode)$(".pac-item-selected").length>0?($(".pac-item-selected").next().addClass("pac-item-selected"),$(".pac-item-selected:first").removeClass("pac-item-selected")):$(".pac-item:first").addClass("pac-item-selected");else if(e.currentTarget.value.length>=wgs.genericreco.options.autocompletePlaces.minLength){var t={input:o.container.find("input").val()};wgs.genericreco.options.autocompletePlaces.bounds&&(t.bounds=wgs.genericreco.options.autocompletePlaces.bounds),wgs.genericreco.options.autocompletePlaces.types&&(t.types=wgs.genericreco.options.autocompletePlaces.types),o.getPredictions(t,function(e){o.buildHTMLPredictions(e)},function(e){console.log(e)})}}),o.container.delegate(".pac-item","click",function(){var e=window.jQuery(this).attr("data-place-id"),t=window.jQuery(this).find(".pac-item-query").text();o.container.find("input").val(t),o.containerPredictionsList.hide(),o.getDetails(e)}),window.jQuery(".gr-wgs-homestore-panel-address-reset").click(function(){o.container.find("input").val(""),o.containerPredictionsList.empty().hide(),o.plugin.ui.hideResultsBlock()}),this.container.find("form.gr-wgs-homestore-panel-searchBlock-form").submit(function(){return!1})},wgs.genericreco.PlacesLocation.prototype.buildHTMLPredictions=function(e){var o=this,t=function(e){var t='<div class="pac-item" data-place-id="'+e.place_id+'"><span class="pac-icon pac-icon-marker"></span><span class="pac-item-query">'+e.description+"</span></div>";o.containerPredictionsList.append(t)};this.containerPredictionsList.empty().show();for(var n=0;n<e.length;n++)t(e[n])},wgs.genericreco.PlacesLocation.prototype.getPredictions=function(e){var o=this,t=new google.maps.places.AutocompleteService;t.getPlacePredictions(e,function(t,n){n==google.maps.places.PlacesServiceStatus.OK?o.buildHTMLPredictions(t):n==google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR||n==google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT?window.setTimeout(function(){o.getPredictions(e)},1e3):console.log(n)})},wgs.genericreco.PlacesLocation.prototype.getDetails=function(e){var o=new google.maps.places.PlacesService(document.getElementsByClassName("gr-wgs-homestore-panel-address-btn")[0]),t=this,n={placeId:e};o.getDetails(n,function(o,n){if(n==google.maps.places.PlacesServiceStatus.OK){var s=o.geometry.location.lat(),i=o.geometry.location.lng();t.plugin.manager.SearchedStores(s,i)}else n==google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR||n==google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT?window.setTimeout(function(){t.getDetails(e)},1e3):console.log(n)})},wgs.genericreco.UI=a,wgs.genericreco.UI.prototype.buildHTMLInitialReco=function(e){var o='<div class="gr-wgs-homestore-mainBlockTitle gr-wgs-homestore-mainBlock-yourStore"><span class="gr-wgs-homestore-mainBlock-yourStore-icon icon icon-garageN"></span><span class="gr-wgs-homestore-mainBlock-yourStore-change">'+wgs.genericreco.L10n.changeStore+'</span><span class="gr-wgs-homestore-mainBlock-yourStore-name">'+e.properties.name+"</span></div>";this.headerContainer.empty().html(o).show();var t=this;this.headerContainer.find(".gr-wgs-homestore-mainBlock-yourStore-name").click(function(){var o=e.geometry.coordinates,n=o[1],s=o[0];t.plugin.manager.reco.sendUserConsultedPOI(n,s,e.properties.store_id,function(){},function(){}),t.toggleSearchPanel()}),this.headerContainer.find(".gr-wgs-homestore-mainBlock-yourStore-change, .gr-wgs-homestore-mainBlock-yourStore-icon").click(function(){t.toggleSearchPanel()})},wgs.genericreco.UI.prototype.buildHTMLFindMyDrive=function(){var e='<div class="gr-wgs-homestore-mainBlockTitle gr-wgs-homestore-mainBlock-findStore"><span class="gr-wgs-homestore-mainBlock-yourStore-icon icon icon-garageN"></span><span class="gr-wgs-homestore-mainBlock-yourStore-change">'+wgs.genericreco.L10n.changeStore+'</span><span class="gr-wgs-homestore-mainBlock-yourStore-name">'+wgs.genericreco.L10n.findStore+"</span></div>";this.headerContainer.empty().html(e).show();var o=this;this.headerContainer.find(".gr-wgs-homestore-mainBlock-findStore").click(function(){o.showSearchPanel()})},wgs.genericreco.UI.prototype.buildWarningHTML5=function(){var e='<div class="gr-wgs-homestore-panel-searchBlock-warning"></div>';this.panelContainerSearch.prepend(e)},wgs.genericreco.UI.prototype.onClickOutsideContainer=function(){var e=this;e.windowContainer.click(function(o){e.isVisibleSearchPanel()&&window.jQuery(o.target).attr("id")!==wgs.genericreco.options.container.replace("#","")&&e.hideSearchPanel()}),e.mainContainer.click(function(e){e.stopPropagation()})},wgs.genericreco.UI.prototype.isVisibleSearchPanel=function(){return this.panelContainer.hasClass("gr-wgs-homestore-panel-open")},wgs.genericreco.UI.prototype.showSearchPanel=function(){this.panelContainer.addClass("gr-wgs-homestore-panel-open")},wgs.genericreco.UI.prototype.hideSearchPanel=function(){this.panelContainer.removeClass("gr-wgs-homestore-panel-open")},wgs.genericreco.UI.prototype.toggleSearchPanel=function(){this.isVisibleSearchPanel()?this.hideSearchPanel():this.showSearchPanel()},wgs.genericreco.UI.prototype.showResultsBlock=function(){this.panelContainerResultsBlock.show()},wgs.genericreco.UI.prototype.hideResultsBlock=function(){this.panelContainerResultsBlock.hide()},wgs.genericreco.UI.prototype.slideDownWarningHTML5=function(e){var o=this;this.panelContainerSearchWarning.text(e).slideDown(500,function(){window.setTimeout(function(){o.slideUpWarningHTML5()},5e3)})},wgs.genericreco.UI.prototype.slideUpWarningHTML5=function(){this.panelContainerSearchWarning.slideUp(500)},wgs.genericreco.UI.prototype.hideWarningHTML5=function(){this.panelContainerSearchWarning.hide()},wgs.genericreco.UI.prototype.buildHTMLRecommendationResults=function(e){var o=this,t=function(e){var t=e.properties.distanceWithGoogle/1e3,n='<li class="gr-wgs-homestore-panel-resultBlock-listItem" data-id='+e.properties.store_id+'><span class="gr-wgs-homestore-panel-resultBlock-listItem-icon icon-garagN"></span><span class="gr-wgs-homestore-panel-resultBlock-listItem-infos"><div><div class="gr-wgs-homestore-panel-resultBlock-listItem-title">'+e.properties.name+'</div><div class="gr-wgs-homestore-panel-resultBlock-listItem-choose" style="float:right">Choisir</div><div class="gr-wgs-homestore-panel-resultBlock-listItem-distance">('+t.toFixed(1)+"km)</div></div></span></li>";o.panelContainerResultsList.append(n),o.panelContainerResultsList.find('.gr-wgs-homestore-panel-resultBlock-listItem[data-id="'+e.properties.store_id+'"]').click(function(){var t=e.geometry.coordinates,n=t[1],s=t[0];o.plugin.manager.reco.sendUserFavoritedPOI(n,s,e.properties.store_id,function(){o.plugin.ui.resetStoreSearch(),o.hideSearchPanel(),o.plugin.ui.buildHTMLInitialReco(e)},function(){o.plugin.ui.resetStoreSearch(),o.hideSearchPanel(),console.log("Error recommendation")})})};o.panelContainerResultsList.empty();for(var n=0;n<e.length;n++)t(e[n]);this.showResultsBlock()},wgs.genericreco.UI.prototype.resetStoreSearch=function(){window.jQuery(".gr-wgs-homestore-panel-address-reset").trigger("click")},wgs.genericreco.UI.prototype.openStore=function(e){e.properties.contact&&e.properties.contact.website&&window.open(e.properties.contact.website,e.properties.contact.website||"_self")},wgs.genericreco.UI.prototype.openAllStores=function(){window.open(wgs.genericreco.options.urls.stores.href,wgs.genericreco.options.urls.stores.target||"_self")},wgs.genericreco.UI.prototype.showLoader=function(){this.panelContainer.find(".gr-wgs-homestore-panel-loaderBlock").show()},wgs.genericreco.UI.prototype.hideLoader=function(){this.panelContainer.find(".gr-wgs-homestore-panel-loaderBlock").hide()}}();