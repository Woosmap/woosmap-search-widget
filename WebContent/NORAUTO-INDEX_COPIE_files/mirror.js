!function(t){if("function"==typeof define&&define.amd){var e=define;define=t}!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(t,e,n){function r(t,i){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=n):0!==r.count||o||e(null,i)}var o=!1;return n=n||i,r.count=t,0===t?e():r}function i(){}e.exports=r},{}],2:[function(t,e,n){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},{}],3:[function(t,e,n){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},{}],4:[function(t,e,n){!function(t){"use strict";n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;n<i;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,s,a=.75*e.length,c=e.length,h=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(n=0;n<c;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),s=t.indexOf(e[n+3]),u[h++]=r<<2|i>>4,u[h++]=(15&i)<<4|o>>2,u[h++]=(3&o)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],5:[function(e,n,r){(function(e){function r(t,e){e=e||{};for(var n=new i,r=0;r<t.length;r++)n.append(t[r]);return e.type?n.getBlob(e.type):n.getBlob()}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=function(){try{return 2==new Blob(["hi"]).size}catch(t){return!1}}(),s=i&&i.prototype.append&&i.prototype.getBlob;n.exports=function(){return o?e.Blob:s?r:t}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],7:[function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],8:[function(t,e,n){e.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],9:[function(e,n,r){"use strict";function i(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}i.Diff,i.prototype.diff_main=function(t,e,n,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,s=this.diff_commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var c=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var h=this.diff_compute_(t,e,o,i);return a&&h.unshift([0,a]),c&&h.push([0,c]),this.diff_cleanupMerge(h),h},i.prototype.diff_compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(a!=-1)return i=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,t],[1,e]];var c=this.diff_halfMatch_(t,e);if(c){var h=c[0],l=c[1],u=c[2],f=c[3],d=c[4],p=this.diff_main(h,u,n,r),g=this.diff_main(l,f,n,r);return p.concat([[0,d]],g)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,r):this.diff_bisect_(t,e,r)},i.prototype.diff_lineMode_=function(t,e,n){var r=this.diff_linesToChars_(t,e);t=r.chars1,e=r.chars2;var i=r.lineArray,o=this.diff_main(t,e,!1,n);this.diff_charsToLines_(o,i),this.diff_cleanupSemantic(o),o.push([0,""]);for(var s=0,a=0,c=0,h="",l="";s<o.length;){switch(o[s][0]){case 1:c++,l+=o[s][1];break;case-1:a++,h+=o[s][1];break;case 0:if(a>=1&&c>=1){o.splice(s-a-c,a+c),s=s-a-c;for(var r=this.diff_main(h,l,!1,n),u=r.length-1;u>=0;u--)o.splice(s,0,r[u]);s+=r.length}c=0,a=0,h="",l=""}s++}return o.pop(),o},i.prototype.diff_bisect_=function(t,e,n){for(var r=t.length,i=e.length,o=Math.ceil((r+i)/2),s=o,a=2*o,c=new Array(a),h=new Array(a),l=0;l<a;l++)c[l]=-1,h[l]=-1;c[s+1]=0,h[s+1]=0;for(var u=r-i,f=u%2!=0,d=0,p=0,g=0,v=0,m=0;m<o&&!((new Date).getTime()>n);m++){for(var y=-m+d;y<=m-p;y+=2){var b,w=s+y;b=y==-m||y!=m&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1;for(var _=b-y;b<r&&_<i&&t.charAt(b)==e.charAt(_);)b++,_++;if(c[w]=b,b>r)p+=2;else if(_>i)d+=2;else if(f){var E=s+u-y;if(E>=0&&E<a&&h[E]!=-1){var k=r-h[E];if(b>=k)return this.diff_bisectSplit_(t,e,b,_,n)}}}for(var x=-m+g;x<=m-v;x+=2){var k,E=s+x;k=x==-m||x!=m&&h[E-1]<h[E+1]?h[E+1]:h[E-1]+1;for(var A=k-x;k<r&&A<i&&t.charAt(r-k-1)==e.charAt(i-A-1);)k++,A++;if(h[E]=k,k>r)v+=2;else if(A>i)g+=2;else if(!f){var w=s+u-x;if(w>=0&&w<a&&c[w]!=-1){var b=c[w],_=s+b-w;if(k=r-k,b>=k)return this.diff_bisectSplit_(t,e,b,_,n)}}}}return[[-1,t],[1,e]]},i.prototype.diff_bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),c=e.substring(r),h=this.diff_main(o,s,!1,i),l=this.diff_main(a,c,!1,i);return h.concat(l)},i.prototype.diff_linesToChars_=function(e,n){function r(e){for(var n="",r=0,s=-1,a=i.length;s<e.length-1;){s=e.indexOf("\n",r),s==-1&&(s=e.length-1);var c=e.substring(r,s+1);r=s+1,(o.hasOwnProperty?o.hasOwnProperty(c):o[c]!==t)?n+=String.fromCharCode(o[c]):(n+=String.fromCharCode(a),o[c]=a,i[a++]=c)}return n}var i=[],o={};return i[0]="",{chars1:r(e),chars2:r(n),lineArray:i}},i.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},i.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},i.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?(n=i,o=n):r=i,i=Math.floor((r-n)/2+n);return i},i.prototype.diff_commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,s=1;;){var a=t.substring(i-s),c=e.indexOf(a);if(c==-1)return o;s+=c,0!=c&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}},i.prototype.diff_halfMatch_=function(t,e){function n(t,e,n){for(var r,i,o,a,c=t.substring(n,n+Math.floor(t.length/4)),h=-1,l="";(h=e.indexOf(c,h+1))!=-1;){var u=s.diff_commonPrefix(t.substring(n),e.substring(h)),f=s.diff_commonSuffix(t.substring(0,n),e.substring(0,h));l.length<f+u&&(l=e.substring(h-f,h)+e.substring(h,h+u),r=t.substring(0,n-f),i=t.substring(n+u),o=e.substring(0,h-f),a=e.substring(h+u))}return 2*l.length>=t.length?[r,i,o,a,l]:null}if(this.Diff_Timeout<=0)return null;var r=t.length>e.length?t:e,i=t.length>e.length?e:t;if(r.length<4||2*i.length<r.length)return null;var o,s=this,a=n(r,i,Math.ceil(r.length/4)),c=n(r,i,Math.ceil(r.length/2));if(!a&&!c)return null;o=c?a&&a[4].length>c[4].length?a:c:a;var h,l,u,f;return t.length>e.length?(h=o[0],l=o[1],u=o[2],f=o[3]):(u=o[0],f=o[1],h=o[2],l=o[3]),[h,l,u,f,o[4]]},i.prototype.diff_cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=0,a=0,c=0,h=0;o<t.length;)0==t[o][0]?(n[r++]=o,s=c,a=h,c=0,h=0,i=t[o][1]):(1==t[o][0]?c+=t[o][1].length:h+=t[o][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(c,h)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,r--,o=r>0?n[r-1]:-1,s=0,a=0,c=0,h=0,i=null,e=!0)),o++;for(e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),o=1;o<t.length;){if(t[o-1][0]==-1&&1==t[o][0]){var l=t[o-1][1],u=t[o][1],f=this.diff_commonOverlap_(l,u),d=this.diff_commonOverlap_(u,l);f>=d?(f>=l.length/2||f>=u.length/2)&&(t.splice(o,0,[0,u.substring(0,f)]),t[o-1][1]=l.substring(0,l.length-f),t[o+1][1]=u.substring(f),o++):(d>=l.length/2||d>=u.length/2)&&(t.splice(o,0,[0,l.substring(0,d)]),t[o-1][0]=1,t[o-1][1]=u.substring(0,u.length-d),t[o+1][0]=-1,t[o+1][1]=l.substring(d),o++),o++}o++}},i.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),o=n.match(i.nonAlphaNumericRegex_),s=r.match(i.nonAlphaNumericRegex_),a=o&&n.match(i.whitespaceRegex_),c=s&&r.match(i.whitespaceRegex_),h=a&&n.match(i.linebreakRegex_),l=c&&r.match(i.linebreakRegex_),u=h&&t.match(i.blanklineEndRegex_),f=l&&e.match(i.blanklineStartRegex_);return u||f?5:h||l?4:o&&!a&&c?3:a||c?2:o||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],o=t[n][1],s=t[n+1][1],a=this.diff_commonSuffix(r,o);if(a){var c=o.substring(o.length-a);r=r.substring(0,r.length-a),o=c+o.substring(0,o.length-a),s=c+s}for(var h=r,l=o,u=s,f=e(r,o)+e(o,s);o.charAt(0)===s.charAt(0);){r+=o.charAt(0),o=o.substring(1)+s.charAt(0),s=s.substring(1);var d=e(r,o)+e(o,s);d>=f&&(f=d,h=r,l=o,u=s)}t[n-1][1]!=h&&(h?t[n-1][1]=h:(t.splice(n-1,1),n--),t[n][1]=l,u?t[n+1][1]=u:(t.splice(n+1,1),n--))}n++}},i.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,i.whitespaceRegex_=/\s/,i.linebreakRegex_=/[\r\n]/,i.blanklineEndRegex_=/\n\r?\n$/,i.blanklineStartRegex_=/^\r?\n\r?\n/,i.prototype.diff_cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=!1,a=!1,c=!1,h=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.Diff_EditCost&&(c||h)?(n[r++]=o,s=c,a=h,i=t[o][1]):(r=0,i=null),c=h=!1):(t[o][0]==-1?h=!0:c=!0,i&&(s&&a&&c&&h||i.length<this.Diff_EditCost/2&&s+a+c+h==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&a?(c=h=!0,r=0):(r--,o=r>0?n[r-1]:-1,c=h=!1),e=!0)),o++;e&&this.diff_cleanupMerge(t)},i.prototype.diff_cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,o="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(e=this.diff_commonPrefix(s,o),0!==e&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),0!==(e=this.diff_commonSuffix(s,o))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[-1,o]):t.splice(n-r-i,r+i,[-1,o],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.diff_cleanupMerge(t)},i.prototype.diff_xIndex=function(t,e){var n,r=0,i=0,o=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),t[n][0]!==-1&&(i+=t[n][1].length),!(r>e));n++)o=r,s=i;return t.length!=n&&t[n][0]===-1?s:s+(e-o)},i.prototype.diff_prettyHtml=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n][0],i=t[n][1],o=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<br>");switch(r){case 1:e[n]='<ins style="background:#e6ffe6;">'+o+"</ins>";break;case-1:e[n]='<del style="background:#ffe6e6;">'+o+"</del>";break;case 0:e[n]="<span>"+o+"</span>"}}return e.join("")},i.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},i.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==-1&&(e[n]=t[n][1]);return e.join("")},i.prototype.diff_levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],s=t[i][1];switch(o){case 1:n+=s.length;break;case-1:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},i.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},i.prototype.diff_fromDelta=function(t,e){for(var n=[],r=0,i=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var c=parseInt(a,10);if(isNaN(c)||c<0)throw new Error("Invalid number in diff_fromDelta: "+a);var h=t.substring(i,i+=c);"="==o[s].charAt(0)?n[r++]=[0,h]:n[r++]=[-1,h];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},i.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},i.prototype.match_bitap_=function(t,e,n){function r(t,r){var i=t/e.length,s=Math.abs(n-r);return o.Match_Distance?i+s/o.Match_Distance:s?1:i}if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),o=this,s=this.Match_Threshold,a=t.indexOf(e,n);a!=-1&&(s=Math.min(r(0,a),s),(a=t.lastIndexOf(e,n+e.length))!=-1&&(s=Math.min(r(0,a),s)));var c=1<<e.length-1;a=-1;for(var h,l,u,f=e.length+t.length,d=0;d<e.length;d++){for(h=0,l=f;h<l;)r(d,n+l)<=s?h=l:f=l,l=Math.floor((f-h)/2+h);f=l;var p=Math.max(1,n-l+1),g=Math.min(n+l,t.length)+e.length,v=Array(g+2);v[g+1]=(1<<d)-1;for(var m=g;m>=p;m--){var y=i[t.charAt(m-1)];if(v[m]=0===d?(v[m+1]<<1|1)&y:(v[m+1]<<1|1)&y|(u[m+1]|u[m])<<1|1|u[m+1],v[m]&c){var b=r(d,m-1);if(b<=s){if(s=b,!((a=m-1)>n))break;p=Math.max(1,2*n-a)}}}if(r(d+1,n)>s)break;u=v}return a},i.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(var n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},i.prototype.patch_addContext_=function(t,e){if(0!=e.length){for(var n=e.substring(t.start2,t.start2+t.length1),r=0;e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=e.substring(t.start2-r,t.start2+t.length1+r);r+=this.Patch_Margin;var i=e.substring(t.start2-r,t.start2);i&&t.diffs.unshift([0,i]);var o=e.substring(t.start2+t.length1,t.start2+t.length1+r);o&&t.diffs.push([0,o]),t.start1-=i.length,t.start2-=i.length,t.length1+=i.length+o.length,t.length2+=i.length+o.length}},i.prototype.patch_make=function(t,e,n){var r,o;if("string"==typeof t&&"string"==typeof e&&void 0===n)r=t,o=this.diff_main(r,e,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&"object"==typeof t&&void 0===e&&void 0===n)o=t,r=this.diff_text1(o);else if("string"==typeof t&&e&&"object"==typeof e&&void 0===n)r=t,o=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=typeof n)throw new Error("Unknown call format to patch_make.");r=t,o=n}if(0===o.length)return[];for(var s=[],a=new i.patch_obj,c=0,h=0,l=0,u=r,f=r,d=0;d<o.length;d++){var p=o[d][0],g=o[d][1];switch(c||0===p||(a.start1=h,a.start2=l),p){case 1:a.diffs[c++]=o[d],a.length2+=g.length,f=f.substring(0,l)+g+f.substring(l);break;case-1:a.length1+=g.length,a.diffs[c++]=o[d],f=f.substring(0,l)+f.substring(l+g.length);break;case 0:g.length<=2*this.Patch_Margin&&c&&o.length!=d+1?(a.diffs[c++]=o[d],a.length1+=g.length,a.length2+=g.length):g.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(a,u),s.push(a),a=new i.patch_obj,c=0,u=f,h=l)}1!==p&&(h+=g.length),p!==-1&&(l+=g.length)}return c&&(this.patch_addContext_(a,u),s.push(a)),s},i.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],o=new i.patch_obj;o.diffs=[];for(var s=0;s<r.diffs.length;s++)o.diffs[s]=r.diffs[s].slice();o.start1=r.start1,o.start2=r.start2,o.length1=r.length1,o.length2=r.length2,e[n]=o}return e},i.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var r=0,i=[],o=0;o<t.length;o++){var s,a=t[o].start2+r,c=this.diff_text1(t[o].diffs),h=-1;if(c.length>this.Match_MaxBits?(s=this.match_main(e,c.substring(0,this.Match_MaxBits),a))!=-1&&((h=this.match_main(e,c.substring(c.length-this.Match_MaxBits),a+c.length-this.Match_MaxBits))==-1||s>=h)&&(s=-1):s=this.match_main(e,c,a),s==-1)i[o]=!1,r-=t[o].length2-t[o].length1;else{i[o]=!0,r=s-a;var l;if(l=h==-1?e.substring(s,s+c.length):e.substring(s,h+this.Match_MaxBits),c==l)e=e.substring(0,s)+this.diff_text2(t[o].diffs)+e.substring(s+c.length);else{var u=this.diff_main(c,l,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(u)/c.length>this.Patch_DeleteThreshold)i[o]=!1;else{this.diff_cleanupSemanticLossless(u);for(var f,d=0,p=0;p<t[o].diffs.length;p++){var g=t[o].diffs[p];0!==g[0]&&(f=this.diff_xIndex(u,d)),1===g[0]?e=e.substring(0,s+f)+g[1]+e.substring(s+f):g[0]===-1&&(e=e.substring(0,s+f)+e.substring(s+this.diff_xIndex(u,d+g[1].length))),g[0]!==-1&&(d+=g[1].length)}}}}}return e=e.substring(n.length,e.length-n.length),[e,i]},i.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",r=1;r<=e;r++)n+=String.fromCharCode(r);for(var r=0;r<t.length;r++)t[r].start1+=e,t[r].start2+=e;var i=t[0],o=i.diffs;if(0==o.length||0!=o[0][0])o.unshift([0,n]),i.start1-=e,i.start2-=e,i.length1+=e,i.length2+=e;else if(e>o[0][1].length){var s=e-o[0][1].length;o[0][1]=n.substring(o[0][1].length)+o[0][1],i.start1-=s,i.start2-=s,i.length1+=s,i.length2+=s}if(i=t[t.length-1],o=i.diffs,0==o.length||0!=o[o.length-1][0])o.push([0,n]),i.length1+=e,i.length2+=e;else if(e>o[o.length-1][1].length){var s=e-o[o.length-1][1].length;o[o.length-1][1]+=n.substring(0,s),i.length1+=s,i.length2+=s}return n},i.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var r=t[n];t.splice(n--,1);for(var o=r.start1,s=r.start2,a="";0!==r.diffs.length;){var c=new i.patch_obj,h=!0;for(c.start1=o-a.length,c.start2=s-a.length,""!==a&&(c.length1=c.length2=a.length,c.diffs.push([0,a]));0!==r.diffs.length&&c.length1<e-this.Patch_Margin;){var l=r.diffs[0][0],u=r.diffs[0][1];1===l?(c.length2+=u.length,s+=u.length,c.diffs.push(r.diffs.shift()),h=!1):l===-1&&1==c.diffs.length&&0==c.diffs[0][0]&&u.length>2*e?(c.length1+=u.length,o+=u.length,h=!1,c.diffs.push([l,u]),r.diffs.shift()):(u=u.substring(0,e-c.length1-this.Patch_Margin),c.length1+=u.length,o+=u.length,0===l?(c.length2+=u.length,s+=u.length):h=!1,c.diffs.push([l,u]),u==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(u.length))}a=this.diff_text2(c.diffs),a=a.substring(a.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(c.length1+=f.length,c.length2+=f.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=f:c.diffs.push([0,f])),h||t.splice(++n,0,c)}}},i.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},i.prototype.patch_fromText=function(t){var e=[];if(!t)return e;for(var n=t.split("\n"),r=0;r<n.length;){var o=n[r].match(/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/);if(!o)throw new Error("Invalid patch string: "+n[r]);var s=new i.patch_obj;for(e.push(s),s.start1=parseInt(o[1],10),""===o[2]?(s.start1--,s.length1=1):"0"==o[2]?s.length1=0:(s.start1--,s.length1=parseInt(o[2],10)),s.start2=parseInt(o[3],10),""===o[4]?(s.start2--,s.length2=1):"0"==o[4]?s.length2=0:(s.start2--,s.length2=parseInt(o[4],10)),r++;r<n.length;){var a=n[r].charAt(0);try{var c=decodeURI(n[r].substring(1))}catch(t){throw new Error("Illegal escape in patch_fromText: "+c)}if("-"==a)s.diffs.push([-1,c]);else if("+"==a)s.diffs.push([1,c]);else if(" "==a)s.diffs.push([0,c]);else{if("@"==a)break;if(""!==a)throw new Error('Invalid patch mode "'+a+'" in: '+c)}r++}}return e},i.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},i.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,r=["@@ -"+t+" +"+e+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:n="+";break;case-1:n="-";break;case 0:n=" "}r[i+1]=n+encodeURI(this.diffs[i][1])+"\n"}return r.join("").replace(/%20/g," ")},n.exports=i,n.exports.diff_match_patch=i,n.exports.DIFF_DELETE=-1,n.exports.DIFF_INSERT=1,n.exports.DIFF_EQUAL=0},{}],10:[function(t,e,n){e.exports=t("./lib/")},{"./lib/":11}],11:[function(t,e,n){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":12,"engine.io-parser":25}],12:[function(t,e,n){(function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);if(e=e||{},t&&"object"==typeof t&&(e=t,t=null),t&&(t=l(t),e.host=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)),this.secure=null!=e.secure?e.secure:n.location&&"https:"==location.protocol,e.host){var i=e.host.split(":");e.hostname=i.shift(),i.length?e.port=i.pop():e.port||(e.port=this.secure?"443":"80")}this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=e.rejectUnauthorized||null,this.open()}function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=t("./transports"),s=t("component-emitter"),a=t("debug")("engine.io-client:socket"),c=t("indexof"),h=t("engine.io-parser"),l=t("parseuri"),u=t("parsejson"),f=t("parseqs");e.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=h.protocol,r.Socket=r,r.Transport=t("./transport"),r.transports=t("./transports"),r.parser=t("engine.io-parser"),r.prototype.createTransport=function(t){a('creating transport "%s"',t);var e=i(this.query);return e.EIO=h.protocol,e.transport=t,this.id&&(e.sid=this.id),new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf("websocket")!=-1)t="websocket";else{if(0==this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a("setting transport %s",t.name);var e=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;u=u||e}u||(a('probe transport "%s" opened',t),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(e){if(!u)if("pong"==e.type&&"probe"==e.data){if(a('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",l),!l)return;r.priorWebsocketSuccess="websocket"==l.name,a('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){u||"closed"!=f.readyState&&(a("changing transport and sending upgrade packet"),h(),f.setTransport(l),l.send([{type:"upgrade"}]),f.emit("upgrade",l),l=null,f.upgrading=!1,f.flush())})}else{a('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=l.name,f.emit("upgradeError",n)}}))}function n(){u||(u=!0,h(),l.close(),l=null)}function i(e){var r=new Error("probe error: "+e);r.transport=l.name,n(),a('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",r)}function o(){i("transport closed")}function s(){i("socket closed")}function c(t){l&&t.name!=l.name&&(a('"%s" works - aborting "%s"',t.name,l.name),n())}function h(){l.removeListener("open",e),l.removeListener("error",i),l.removeListener("close",o),f.removeListener("close",s),f.removeListener("upgrading",c)}a('probing transport "%s"',t);var l=this.createTransport(t,{probe:1}),u=!1,f=this;r.priorWebsocketSuccess=!1,l.once("open",e),l.once("error",i),l.once("close",o),this.once("close",s),this.once("upgrading",c),l.open()},r.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(a('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(u(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else a('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){this.sendPacket("ping")},r.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},r.prototype.sendPacket=function(t,e,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:t,data:e};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),a("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){a('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":13,"./transports":14,"component-emitter":7,debug:20,
"engine.io-parser":25,indexof:30,parsejson:34,parseqs:35,parseuri:23}],13:[function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var i=t("engine.io-parser"),o=t("component-emitter");e.exports=r,o(r.prototype),r.timestamps=0,r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":7,"engine.io-parser":25}],14:[function(t,e,n){(function(e){function r(t){var n=!1,r=!1,a=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,h=location.port;h||(h=c?443:80),n=t.hostname!=location.hostname||h!=t.port,r=t.secure!=c}if(t.xdomain=n,t.xscheme=r,"open"in new i(t)&&!t.forceJSONP)return new o(t);if(!a)throw new Error("JSONP disabled");return new s(t)}var i=t("xmlhttprequest"),o=t("./polling-xhr"),s=t("./polling-jsonp"),a=t("./websocket");n.polling=r,n.websocket=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":15,"./polling-xhr":16,"./websocket":18,xmlhttprequest:19}],15:[function(t,e,n){(function(n){function r(){}function i(t){o.call(this,t),this.query=this.query||{},a||(n.___eio||(n.___eio=[]),a=n.___eio),this.index=a.length;var e=this;a.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r)},!1)}var o=t("./polling"),s=t("component-inherit");e.exports=i;var a;s(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(t)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(/\\n/g,"\\\n"),this.area.value=t.replace(/\n/g,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-inherit":8}],16:[function(e,n,r){(function(r){function i(){}function o(t){if(h.call(this,t),r.location){var e="https:"==location.protocol,n=location.port;n||(n=e?443:80),this.xd=t.hostname!=r.location.hostname||n!=t.port,this.xs=t.secure!=e}}function s(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=t!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function a(){for(var t in s.requests)s.requests.hasOwnProperty(t)&&s.requests[t].abort()}var c=e("xmlhttprequest"),h=e("./polling"),l=e("component-emitter"),u=e("component-inherit"),f=e("debug")("engine.io-client:polling-xhr");n.exports=o,n.exports.Request=s,u(o,h),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new s(t)},o.prototype.doWrite=function(e,n){var r="string"!=typeof e&&e!==t,i=this.request({method:"POST",data:e,isBinary:r}),o=this;i.on("success",n),i.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=i},o.prototype.doPoll=function(){f("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},l(s.prototype),s.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new c(t),n=this;try{if(f("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){n.onLoad()},e.onerror=function(){n.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?n.onLoad():setTimeout(function(){n.onError(e.status)},0))},f("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){n.onError(t)},0)}r.document&&(this.index=s.requestsCount++,s.requests[this.index]=this)},s.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},s.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},s.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},s.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=i:this.xhr.onreadystatechange=i,t)try{this.xhr.abort()}catch(t){}r.document&&delete s.requests[this.index],this.xhr=null}},s.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},s.prototype.hasXDR=function(){return void 0!==r.XDomainRequest&&!this.xs&&this.enablesXDR},s.prototype.abort=function(){this.cleanup()},r.document&&(s.requestsCount=0,s.requests={},r.attachEvent?r.attachEvent("onunload",a):r.addEventListener&&r.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":17,"component-emitter":7,"component-inherit":8,debug:20,xmlhttprequest:19}],17:[function(t,e,n){function r(t){var e=t&&t.forceBase64;h&&!e||(this.supportsBinary=!1),i.call(this,t)}var i=t("../transport"),o=t("parseqs"),s=t("engine.io-parser"),a=t("component-inherit"),c=t("debug")("engine.io-client:polling");e.exports=r;var h=function(){return null!=new(t("xmlhttprequest"))({xdomain:!1}).responseType}();a(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){c("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||e()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;c("polling got data %s",t);var n=function(t,n,r){if("opening"==e.readyState&&e.onOpen(),"close"==t.type)return e.onClose(),!1;e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){c("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+i.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t}},{"../transport":13,"component-inherit":8,debug:20,"engine.io-parser":25,parseqs:35,xmlhttprequest:19}],18:[function(e,n,r){function i(t){t&&t.forceBase64&&(this.supportsBinary=!1),o.call(this,t)}var o=e("../transport"),s=e("engine.io-parser"),a=e("parseqs"),c=e("component-inherit"),h=e("debug")("engine.io-client:websocket"),l=e("ws");n.exports=i,c(i,o),i.prototype.name="websocket",i.prototype.supportsBinary=!0,i.prototype.doOpen=function(){if(this.check()){var e=this.uri(),n={agent:this.agent};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.ws=new l(e,void 0,n),this.ws.binaryType===t&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},i.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(i.prototype.onData=function(t){var e=this;setTimeout(function(){o.prototype.onData.call(e,t)},0)}),i.prototype.write=function(t){function e(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1;for(var r=0,i=t.length;r<i;r++)s.encodePacket(t[r],this.supportsBinary,function(t){try{n.ws.send(t)}catch(t){h("websocket closed before onclose event")}});setTimeout(e,0)},i.prototype.onClose=function(){o.prototype.onClose.call(this)},i.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},i.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+n+this.path+t},i.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===i.prototype.name)}},{"../transport":13,"component-inherit":8,debug:20,"engine.io-parser":25,parseqs:35,ws:24}],19:[function(t,e,n){var r=t("has-cors");e.exports=function(t){var e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(t){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}},{"has-cors":29}],20:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?localStorage.removeItem("debug"):localStorage.debug=t}catch(t){}}function a(){var t;try{t=localStorage.debug}catch(t){}return t}n=e.exports=t("./debug"),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(a())},{"./debug":21}],21:[function(t,e,n){function r(){return n.colors[l++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(h||e);t.diff=o,t.prev=h,t.curr=e,h=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];e=i.call(t,o),s.splice(a,1),a--}return e}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s)),(i.log||n.log||console.log.bind(console)).apply(t,s)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function s(){n.enable("")}function a(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var h,l=0},{ms:22}],22:[function(t,e,n){function r(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"y":return n*u;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"h":return n*h;case"minutes":case"minute":case"m":return n*c;case"seconds":case"second":case"s":return n*a;case"ms":return n}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=h?Math.round(t/h)+"h":t>=c?Math.round(t/c)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function o(t){return s(t,l,"day")||s(t,h,"hour")||s(t,c,"minute")||s(t,a,"second")||t+" ms"}function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,c=60*a,h=60*c,l=24*h,u=365.25*l;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e.long?o(t):i(t)}},{}],23:[function(t,e,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,n=t.indexOf("["),o=t.indexOf("]");n!=-1&&o!=-1&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=r.exec(t||""),a={},c=14;c--;)a[i[c]]=s[c]||"";return n!=-1&&o!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},{}],24:[function(t,e,n){function r(t,e,n){return e?new o(t,e):new o(t)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket;e.exports=o?r:null,o&&(r.prototype=o.prototype)},{}],25:[function(e,n,r){(function(n){function i(t,e){return e("b"+r.packets[t.type]+t.data.data)}function o(t,e,n){if(!e)return r.encodeBase64Packet(t,n);var i=t.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=y[t.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return n(s.buffer)}function s(t,e,n){if(!e)return r.encodeBase64Packet(t,n);var i=new FileReader;return i.onload=function(){t.data=i.result,r.encodePacket(t,e,!0,n)},i.readAsArrayBuffer(t.data)}function a(t,e,n){if(!e)return r.encodeBase64Packet(t,n);if(m)return s(t,e,n);var i=new Uint8Array(1);return i[0]=y[t.type],n(new _([i.buffer,t.data]))}function c(t,e,n){for(var r=new Array(t.length),i=d(t.length,n),o=0;o<t.length;o++)!function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})}(o,t[o],i)}var h=e("./keys"),l=e("has-binary"),u=e("arraybuffer.slice"),f=e("base64-arraybuffer"),d=e("after"),p=e("utf8"),g=navigator.userAgent.match(/Android/i),v=/PhantomJS/i.test(navigator.userAgent),m=g||v;r.protocol=3;var y=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(y),w={type:"error",data:"parser error"},_=e("blob");r.encodePacket=function(e,r,s,c){"function"==typeof r&&(c=r,r=!1),"function"==typeof s&&(c=s,s=null);var h=e.data===t?t:e.data.buffer||e.data;if(n.ArrayBuffer&&h instanceof ArrayBuffer)return o(e,r,c);if(_&&h instanceof n.Blob)return a(e,r,c);if(h&&h.base64)return i(e,c);var l=y[e.type];return t!==e.data&&(l+=s?p.encode(String(e.data)):String(e.data)),c(""+l)},r.encodeBase64Packet=function(t,e){var i="b"+r.packets[t.type];if(_&&t.data instanceof _){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];e(i+t)},o.readAsDataURL(t.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var a=new Uint8Array(t.data),c=new Array(a.length),h=0;h<a.length;h++)c[h]=a[h];s=String.fromCharCode.apply(null,c)}return i+=n.btoa(s),e(i)},r.decodePacket=function(e,n,i){if("string"==typeof e||e===t){if("b"==e.charAt(0))return r.decodeBase64Packet(e.substr(1),n);if(i)try{e=p.decode(e)}catch(t){return w}var o=e.charAt(0);return Number(o)==o&&b[o]?e.length>1?{type:b[o],data:e.substring(1)}:{type:b[o]}:w}var s=new Uint8Array(e),o=s[0],a=u(e,1);return _&&"blob"===n&&(a=new _([a])),{type:b[o],data:a}},r.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!n.ArrayBuffer)return{type:r,data:{base64:!0,data:t.substr(1)}};var i=f.decode(t.substr(1));return"blob"===e&&_&&(i=new _([i])),{type:r,data:i}},r.encodePayload=function(t,e,n){function i(t){return t.length+":"+t}function o(t,n){r.encodePacket(t,!!s&&e,!0,function(t){n(null,i(t))})}"function"==typeof e&&(n=e,e=null);var s=l(t);return e&&s?_&&!m?r.encodePayloadAsBlob(t,n):r.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,o,function(t,e){return n(e.join(""))}):n("0:")},r.decodePayload=function(t,e,n){if("string"!=typeof t)return r.decodePayloadAsBinary(t,e,n);"function"==typeof e&&(n=e,e=null);var i;if(""==t)return n(w,0,1);for(var o,s,a="",c=0,h=t.length;c<h;c++){var l=t.charAt(c);if(":"!=l)a+=l;else{if(""==a||a!=(o=Number(a)))return n(w,0,1);if(s=t.substr(c+1,o),a!=s.length)return n(w,0,1);if(s.length){if(i=r.decodePacket(s,e,!0),w.type==i.type&&w.data==i.data)return n(w,0,1);if(!1===n(i,c+o,h))return}c+=o,a=""}}return""!=a?n(w,0,1):void 0},r.encodePayloadAsArrayBuffer=function(t,e){function n(t,e){r.encodePacket(t,!0,!0,function(t){return e(null,t)})}if(!t.length)return e(new ArrayBuffer(0));c(t,n,function(t,n){var r=n.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}i[o++]=e?0:1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),e(i.buffer)})},r.encodePayloadAsBlob=function(t,e){function n(t,e){r.encodePacket(t,!0,!0,function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,n[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,s=o.toString(),a=new Uint8Array(s.length+1),i=0;i<s.length;i++)a[i]=parseInt(s[i]);if(a[s.length]=255,_){var c=new _([n.buffer,a.buffer,t]);e(null,c)}})}c(t,n,function(t,n){return e(new _(n))})},r.decodePayloadAsBinary=function(t,e,n){"function"==typeof e&&(n=e,e=null);for(var i=t,o=[],s=!1;i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],h="",l=1;255!=a[l];l++){if(h.length>310){s=!0;break}h+=a[l]}if(s)return n(w,0,1);i=u(i,2+h.length),h=parseInt(h);var f=u(i,0,h);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(t){var d=new Uint8Array(f);f="";for(var l=0;l<d.length;l++)f+=String.fromCharCode(d[l])}o.push(f),i=u(i,h)}var p=o.length;o.forEach(function(t,i){n(r.decodePacket(t,e,!0),i,p)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:5,"has-binary":28,utf8:51}],26:[function(t,e,n){e.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},{}],27:[function(t,e,n){e.exports=function(){return this}()},{}],28:[function(t,e,n){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(t.hasOwnProperty(o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:31}],29:[function(t,e,n){var r=t("global");try{e.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(t){e.exports=!1}},{global:27}],30:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],31:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],32:[function(t,e,n){(function(t){(function(){function r(t,e){function n(t){if(n[t]!==v)return n[t];var r;if("bug-string-char-index"==t)r="a"!="a"[0];else if("json"==t)r=n("json-stringify")&&n("json-parse");else{var o,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,l="function"==typeof c&&b;if(l){(o=function(){return 1}).toJSON=o;try{l="0"===c(0)&&"0"===c(new i)&&'""'==c(new s)&&c(y)===v&&c(v)===v&&c()===v&&"1"===c(o)&&"[1]"==c([o])&&"[null]"==c([v])&&"null"==c(null)&&"[null,null,null]"==c([v,y,null])&&c({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==a&&"1"===c(null,o)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new h(-1))}catch(t){l=!1}}r=l}if("json-parse"==t){var u=e.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){o=u(a);var f=5==o.a.length&&1===o.a[0];if(f){try{f=!u('"\t"')}catch(t){}if(f)try{f=1!==u("01")}catch(t){}if(f)try{f=1!==u("1.")}catch(t){}}}}catch(t){f=!1}r=f}}return n[t]=!!r}t||(t=a.Object()),e||(e=a.Object());var i=t.Number||a.Number,s=t.String||a.String,c=t.Object||a.Object,h=t.Date||a.Date,l=t.SyntaxError||a.SyntaxError,u=t.TypeError||a.TypeError,f=t.Math||a.Math,d=t.JSON||a.JSON;"object"==typeof d&&d&&(e.stringify=d.stringify,e.parse=d.parse);var p,g,v,m=c.prototype,y=m.toString,b=new h(-0xc782b5b800cec);try{b=b.getUTCFullYear()==-109252&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(t){}if(!n("json")){var w=n("bug-string-char-index");if(!b)var _=f.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],k=function(t,e){return E[e]+365*(t-1970)+_((t-1969+(e=+(e>1)))/4)-_((t-1901+e)/100)+_((t-1601+e)/400)};if((p=m.hasOwnProperty)||(p=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,p=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,p.call(this,t)}),g=function(t,e){var n,r,i,s=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)p.call(r,i)&&s++;return n=r=null,s?g=2==s?function(t,e){var n,r={},i="[object Function]"==y.call(t);for(n in t)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(t,n)||e(n)}:function(t,e){var n,r,i="[object Function]"==y.call(t);for(n in t)i&&"prototype"==n||!p.call(t,n)||(r="constructor"===n)||e(n);(r||p.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(t,e){var n,i,s="[object Function]"==y.call(t),a=!s&&"function"!=typeof t.constructor&&o[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(n in t)s&&"prototype"==n||!a.call(t,n)||e(n);for(i=r.length;n=r[--i];a.call(t,n)&&e(n));}),g(t,e)},!n("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A=function(t,e){return("000000"+(e||0)).slice(-t)},C=function(t){for(var e='"',n=0,r=t.length,i=!w||r>10,o=i&&(w?t.split(""):t);n<r;n++){var s=t.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=x[s];break;default:if(s<32){e+="\\u00"+A(2,s.toString(16));break}e+=i?o[n]:t.charAt(n)}}return e+'"'},S=function(t,e,n,r,i,o,s){var a,c,h,l,f,d,m,b,w,E,x,T,N,j,O,M;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(c=y.call(a))||p.call(a,"toJSON"))"function"==typeof a.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||p.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&a<1/0){if(k){for(f=_(a/864e5),h=_(f/365.2425)+1970-1;k(h+1,0)<=f;h++);for(l=_((f-k(h,0))/30.42);k(h,l+1)<=f;l++);f=1+f-k(h,l),d=(a%864e5+864e5)%864e5,m=_(d/36e5)%24,b=_(d/6e4)%60,w=_(d/1e3)%60,E=d%1e3}else h=a.getUTCFullYear(),l=a.getUTCMonth(),f=a.getUTCDate(),m=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),E=a.getUTCMilliseconds();a=(h<=0||h>=1e4?(h<0?"-":"+")+A(6,h<0?-h:h):A(4,h))+"-"+A(2,l+1)+"-"+A(2,f)+"T"+A(2,m)+":"+A(2,b)+":"+A(2,w)+"."+A(3,E)+"Z"}else a=null;if(n&&(a=n.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(c=y.call(a)))return""+a;if("[object Number]"==c)return a>-1/0&&a<1/0?""+a:"null";if("[object String]"==c)return C(""+a);if("object"==typeof a){for(j=s.length;j--;)if(s[j]===a)throw u();if(s.push(a),x=[],O=o,o+=i,"[object Array]"==c){for(N=0,j=a.length;N<j;N++)T=S(N,a,n,r,i,o,s),x.push(T===v?"null":T);M=x.length?i?"[\n"+o+x.join(",\n"+o)+"\n"+O+"]":"["+x.join(",")+"]":"[]"}else g(r||a,function(t){var e=S(t,a,n,r,i,o,s);e!==v&&x.push(C(t)+":"+(i?" ":"")+e)}),M=x.length?i?"{\n"+o+x.join(",\n"+o)+"\n"+O+"}":"{"+x.join(",")+"}":"{}";return s.pop(),M}};e.stringify=function(t,e,n){var r,i,s,a;if(o[typeof e]&&e)if("[object Function]"==(a=y.call(e)))i=e;else if("[object Array]"==a){s={};for(var c,h=0,l=e.length;h<l;c=e[h++],("[object String]"==(a=y.call(c))||"[object Number]"==a)&&(s[c]=1));}if(n)if("[object Number]"==(a=y.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return S("",(c={},c[""]=t,c),i,s,r,"",[])}}if(!n("json-parse")){var T,N,j=s.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw T=N=null,l()},D=function(){for(var t,e,n,r,i,o=N,s=o.length;T<s;)switch(i=o.charCodeAt(T)){case 9:case 10:case 13:case 32:T++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=w?o.charAt(T):o[T],T++,t;case 34:for(t="@",T++;T<s;)if((i=o.charCodeAt(T))<32)M();else if(92==i)switch(i=o.charCodeAt(++T)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=O[i],T++;break;case 117:for(e=++T,n=T+4;T<n;T++)(i=o.charCodeAt(T))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||M();t+=j("0x"+o.slice(e,T));break;default:M()}else{if(34==i)break;for(i=o.charCodeAt(T),e=T;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++T);t+=o.slice(e,T)}if(34==o.charCodeAt(T))return T++,t;M();default:if(e=T,45==i&&(r=!0,i=o.charCodeAt(++T)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(T+1))>=48&&i<=57&&M(),r=!1;T<s&&(i=o.charCodeAt(T))>=48&&i<=57;T++);if(46==o.charCodeAt(T)){for(n=++T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&M(),T=n}if(101==(i=o.charCodeAt(T))||69==i){for(i=o.charCodeAt(++T),43!=i&&45!=i||T++,n=T;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==T&&M(),T=n}return+o.slice(e,T)}if(r&&M(),"true"==o.slice(T,T+4))return T+=4,!0;if("false"==o.slice(T,T+5))return T+=5,!1;if("null"==o.slice(T,T+4))return T+=4,null;M()}return"$"},P=function(t){var e,n;if("$"==t&&M(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=D());n||(n=!0))n&&(","==t?"]"==(t=D())&&M():M()),","==t&&M(),e.push(P(t));return e}if("{"==t){for(e={};"}"!=(t=D());n||(n=!0))n&&(","==t?"}"==(t=D())&&M():M()),","!=t&&"string"==typeof t&&"@"==(w?t.charAt(0):t[0])&&":"==D()||M(),e[t.slice(1)]=P(D());return e}M()}return t},z=function(t,e,n){var r=B(t,e,n);r===v?delete t[e]:t[e]=r},B=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if("[object Array]"==y.call(i))for(r=i.length;r--;)z(i,r,n);else g(i,function(t){z(i,t,n)});return n.call(t,e,i)};e.parse=function(t,e){var n,r;return T=0,N=""+t,n=P(D()),"$"!=D()&&M(),T=N=null,e&&"[object Function]"==y.call(e)?B((r={},r[""]=n,r),"",e):n}}}return e.runInContext=r,e}var i="function"==typeof define&&define.amd,o={function:!0,object:!0},s=o[typeof n]&&n&&!n.nodeType&&n,a=o[typeof window]&&window||this,c=s&&o[typeof e]&&e&&!e.nodeType&&"object"==typeof t&&t;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(a=c),s&&!i)r(a,s);else{var h=a.JSON,l=a.JSON3,u=!1,f=r(a,a.JSON3={noConflict:function(){return u||(u=!0,a.JSON=h,a.JSON3=l,h=l=null),f}});a.JSON={parse:f.parse,stringify:f.stringify}}i&&define(function(){return f})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,e,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},
n.values=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(t[n]);return e},n.merge=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t},n.length=function(t){return n.keys(t).length},n.isEmpty=function(t){return 0==n.length(t)}},{}],34:[function(t,e,n){(function(t){var n=/^[\],:{}\s]*$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(/^\s+/,"").replace(/\s+$/,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(t,e,n){n.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],36:[function(t,e,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){for(var e=r.exec(t||""),n={},o=14;o--;)n[i[o]]=e[o]||"";return n}},{}],37:[function(t,e,n){e.exports=t("./lib/")},{"./lib/":38}],38:[function(e,n,r){function i(e,n){"object"==typeof e&&(n=e,e=t),n=n||{};var r,i=o(e),s=i.source,l=i.id;return n.forceNew||n["force new connection"]||!1===n.multiplex?(c("ignoring socket cache for %s",s),r=a(s,n)):(h[l]||(c("new io instance for %s",s),h[l]=a(s,n)),r=h[l]),r.socket(i.path)}var o=e("./url"),s=e("socket.io-parser"),a=e("./manager"),c=e("debug")("socket.io-client");n.exports=r=i;var h=r.managers={};r.protocol=s.protocol,r.connect=i,r.Manager=e("./manager"),r.Socket=e("./socket")},{"./manager":39,"./socket":41,"./url":42,debug:43,"socket.io-parser":45}],39:[function(e,n,r){function i(e,n){if(!(this instanceof i))return new i(e,n);e&&"object"==typeof e&&(n=e,e=t),n=n||{},n.path=n.path||"/socket.io",this.nsps={},this.subs=[],this.opts=n,this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(n.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new c.Encoder,this.decoder=new c.Decoder,this.autoConnect=n.autoConnect!==!1,this.autoConnect&&this.open()}var o=(e("./url"),e("engine.io-client")),s=e("./socket"),a=e("component-emitter"),c=e("socket.io-parser"),h=e("./on"),l=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager")),f=e("indexof"),d=e("backo2");n.exports=i,i.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)this.nsps[t].emit.apply(this.nsps[t],arguments)},i.prototype.updateSocketIds=function(){for(var t in this.nsps)this.nsps[t].id=this.engine.id},a(i.prototype),i.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},i.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},i.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},i.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},i.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},i.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},i.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},i.prototype.open=i.prototype.connect=function(t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=o(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=h(e,"open",function(){n.onopen(),t&&t()}),i=h(e,"error",function(e){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;u("connect attempt will timeout after %d",s);var a=setTimeout(function(){u("connect attempt timed out after %d",s),r.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(r),this.subs.push(i),this},i.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(h(t,"data",l(this,"ondata"))),this.subs.push(h(this.decoder,"decoded",l(this,"ondecoded"))),this.subs.push(h(t,"error",l(this,"onerror"))),this.subs.push(h(t,"close",l(this,"onclose")))},i.prototype.ondata=function(t){this.decoder.add(t)},i.prototype.ondecoded=function(t){this.emit("packet",t)},i.prototype.onerror=function(t){u("error",t),this.emitAll("error",t)},i.prototype.socket=function(t){var e=this.nsps[t];if(!e){e=new s(this,t),this.nsps[t]=e;var n=this;e.on("connect",function(){e.id=n.engine.id,~f(n.connected,e)||n.connected.push(e)})}return e},i.prototype.destroy=function(t){var e=f(this.connected,t);~e&&this.connected.splice(e,1),this.connected.length||this.close()},i.prototype.packet=function(t){u("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(t){for(var n=0;n<t.length;n++)e.engine.write(t[n]);e.encoding=!1,e.processPacketQueue()}))},i.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},i.prototype.cleanup=function(){for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},i.prototype.close=i.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},i.prototype.onclose=function(t){u("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},i.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();u("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(u("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(u("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(u("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},i.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":40,"./socket":41,"./url":42,backo2:3,"component-bind":6,"component-emitter":7,debug:43,"engine.io-client":10,indexof:30,"object-component":33,"socket.io-parser":45}],40:[function(t,e,n){function r(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}e.exports=r},{}],41:[function(t,e,n){function r(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var i=t("socket.io-parser"),o=t("component-emitter"),s=t("to-array"),a=t("./on"),c=t("component-bind"),h=t("debug")("socket.io-client:socket"),l=t("has-binary");e.exports=r;var u={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[a(t,"open",c(this,"onopen")),a(t,"packet",c(this,"onpacket")),a(t,"close",c(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},r.prototype.send=function(){var t=s(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(u.hasOwnProperty(t))return f.apply(this,arguments),this;var e=s(arguments),n=i.EVENT;l(e)&&(n=i.BINARY_EVENT);var r={type:n,data:e};return"function"==typeof e[e.length-1]&&(h("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){h("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){h("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];h("emitting event %j",e),null!=t.id&&(h("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=s(arguments);h("sending ack %j",r);var o=l(r)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){h("calling ack %s with %j",t.id,t.data),this.acks[t.id].apply(this,t.data),delete this.acks[t.id]},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){h("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(h("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":40,"component-bind":6,"component-emitter":7,debug:43,"has-binary":28,"socket.io-parser":45,"to-array":49}],42:[function(t,e,n){(function(n){function r(t,e){var r=t,e=e||n.location;return null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.hostname+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),r=i(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(e&&e.port==r.port?"":":"+r.port),r}var i=t("parseuri"),o=t("debug")("socket.io-client:url");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:43,parseuri:36}],43:[function(t,e,n){function r(t){return r.enabled(t)?function(e){e=i(e);var n=new Date,o=n-(r[t]||n);r[t]=n,e=t+" "+e+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function i(t){return t instanceof Error?t.stack||t.message:t}e.exports=r,r.names=[],r.skips=[],r.enable=function(t){try{localStorage.debug=t}catch(t){}for(var e=(t||"").split(/[\s,]+/),n=e.length,i=0;i<n;i++)t=e[i].replace("*",".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$"))},r.disable=function(){r.enable("")},r.humanize=function(t){return t>=36e5?(t/36e5).toFixed(1)+"h":t>=6e4?(t/6e4).toFixed(1)+"m":t>=1e3?(t/1e3|0)+"s":t+"ms"},r.enabled=function(t){for(var e=0,n=r.skips.length;e<n;e++)if(r.skips[e].test(t))return!1;for(var e=0,n=r.names.length;e<n;e++)if(r.names[e].test(t))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(t){}},{}],44:[function(e,n,r){(function(n){var i=e("isarray"),o=e("./is-buffer");r.deconstructPacket=function(t){function e(t){if(!t)return t;if(o(t)){var r={_placeholder:!0,num:n.length};return n.push(t),r}if(i(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a]);return s}if("object"==typeof t&&!(t instanceof Date)){var s={};for(var c in t)s[c]=e(t[c]);return s}return t}var n=[],r=t.data,s=t;return s.data=e(r),s.attachments=n.length,{packet:s,buffers:n}},r.reconstructPacket=function(e,n){function r(t){if(t&&t._placeholder){return n[t.num]}if(i(t)){for(var e=0;e<t.length;e++)t[e]=r(t[e]);return t}if(t&&"object"==typeof t){for(var o in t)t[o]=r(t[o]);return t}return t}return e.data=r(e.data),e.attachments=t,e},r.removeBlobs=function(t,e){function r(t,c,h){if(!t)return t;if(n.Blob&&t instanceof Blob||n.File&&t instanceof File){s++;var l=new FileReader;l.onload=function(){h?h[c]=this.result:a=this.result,--s||e(a)},l.readAsArrayBuffer(t)}else if(i(t))for(var u=0;u<t.length;u++)r(t[u],u,t);else if(t&&"object"==typeof t&&!o(t))for(var f in t)r(t[f],f,t)}var s=0,a=t;r(a),s||e(a)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":46,isarray:31}],45:[function(t,e,n){function r(){}function i(t){var e="",r=!1;return e+=t.type,n.BINARY_EVENT!=t.type&&n.BINARY_ACK!=t.type||(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,e+=t.nsp),null!=t.id&&(r&&(e+=",",r=!1),e+=t.id),null!=t.data&&(r&&(e+=","),e+=u.stringify(t.data)),l("encoded %j as %s",t,e),e}function o(t,e){function n(t){var n=d.deconstructPacket(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var e={},r=0;if(e.type=Number(t.charAt(0)),null==n.types[e.type])return h();if(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type){for(e.attachments="";"-"!=t.charAt(++r);)e.attachments+=t.charAt(r);e.attachments=Number(e.attachments)}if("/"==t.charAt(r+1))for(e.nsp="";++r;){var i=t.charAt(r);if(","==i)break;if(e.nsp+=i,r+1==t.length)break}else e.nsp="/";var o=t.charAt(r+1);if(""!=o&&Number(o)==o){for(e.id="";++r;){var i=t.charAt(r);if(null==i||Number(i)!=i){--r;break}if(e.id+=t.charAt(r),r+1==t.length)break}e.id=Number(e.id)}if(t.charAt(++r))try{e.data=u.parse(t.substr(r))}catch(t){return h()}return l("decoded %s as %j",t,e),e}function c(t){this.reconPack=t,this.buffers=[]}function h(t){return{type:n.ERROR,data:"parser error"}}var l=t("debug")("socket.io-parser"),u=t("json3"),f=(t("isarray"),t("component-emitter")),d=t("./binary"),p=t("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=s,r.prototype.encode=function(t,e){if(l("encoding packet %j",t),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)o(t,e);else{e([i(t)])}},f(s.prototype),s.prototype.add=function(t){var e;if("string"==typeof t)e=a(t),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?(this.reconstructor=new c(e),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!p(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",e))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":44,"./is-buffer":46,"component-emitter":7,debug:47,isarray:31,json3:48}],46:[function(t,e,n){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{dup:43}],48:[function(t,e,n){!function(t){function e(t){if(e[t]!==o)return e[t];var n;if("bug-string-char-index"==t)n="a"!="a"[0];else if("json"==t)n=e("json-stringify")&&e("json-parse");else{var r,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var a=h.stringify,c="function"==typeof a&&l;if(c){(r=function(){return 1}).toJSON=r;try{c="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(s)===o&&a(o)===o&&a()===o&&"1"===a(r)&&"[1]"==a([r])&&"[null]"==a([o])&&"null"==a(null)&&"[null,null,null]"==a([o,s,null])&&a({a:[r,!0,!1,null,"\0\b\n\f\r\t"]})==i&&"1"===a(null,r)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(t){c=!1}}n=c}if("json-parse"==t){var u=h.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){r=u(i);var f=5==r.a.length&&1===r.a[0];if(f){try{f=!u('"\t"')}catch(t){}if(f)try{f=1!==u("01")}catch(t){}if(f)try{f=1!==u("1.")}catch(t){}}}}catch(t){f=!1}n=f}}return e[t]=!!n}var r,i,o,s={}.toString,a="function"==typeof define&&define.amd,c="object"==typeof JSON&&JSON,h="object"==typeof n&&n&&!n.nodeType&&n;h&&c?(h.stringify=c.stringify,h.parse=c.parse):h=t.JSON=c||{};var l=new Date(-0xc782b5b800cec);try{l=l.getUTCFullYear()==-109252&&0===l.getUTCMonth()&&1===l.getUTCDate()&&10==l.getUTCHours()&&37==l.getUTCMinutes()&&6==l.getUTCSeconds()&&708==l.getUTCMilliseconds()}catch(t){}if(!e("json")){var u=e("bug-string-char-index");if(!l)var f=Math.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(t,e){return d[e]+365*(t-1970)+f((t-1969+(e=+(e>1)))/4)-f((t-1901+e)/100)+f((t-1601+e)/400)};(r={}.hasOwnProperty)||(r=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=s?r=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,r=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,r.call(this,t)});var g={boolean:1,number:1,string:1,undefined:1},v=function(t,e){var n=typeof t[e];return"object"==n?!!t[e]:!g[n]};if(i=function(t,e){var n,o,a,c=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(a in o)r.call(o,a)&&c++;return n=o=null,c?i=2==c?function(t,e){var n,i={},o="[object Function]"==s.call(t);for(n in t)o&&"prototype"==n||r.call(i,n)||!(i[n]=1)||!r.call(t,n)||e(n)}:function(t,e){var n,i,o="[object Function]"==s.call(t);for(n in t)o&&"prototype"==n||!r.call(t,n)||(i="constructor"===n)||e(n);(i||r.call(t,n="constructor"))&&e(n)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],i=function(t,e){var n,i,a="[object Function]"==s.call(t),c=!a&&"function"!=typeof t.constructor&&v(t,"hasOwnProperty")?t.hasOwnProperty:r;for(n in t)a&&"prototype"==n||!c.call(t,n)||e(n);for(i=o.length;n=o[--i];c.call(t,n)&&e(n));}),i(t,e)},!e("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},y=function(t,e){return("000000"+(e||0)).slice(-t)},b=function(t){var e,n='"',r=0,i=t.length,o=i>10&&u;for(o&&(e=t.split(""));r<i;r++){var s=t.charCodeAt(r);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=m[s];break;default:if(s<32){n+="\\u00"+y(2,s.toString(16));break}n+=o?e[r]:u?t.charAt(r):t[r]}}return n+'"'},w=function(t,e,n,a,c,h,l){var u,d,g,v,m,_,E,k,x,A,C,S,T,N,j,O;try{u=e[t]}catch(t){}if("object"==typeof u&&u)if("[object Date]"!=(d=s.call(u))||r.call(u,"toJSON"))"function"==typeof u.toJSON&&("[object Number]"!=d&&"[object String]"!=d&&"[object Array]"!=d||r.call(u,"toJSON"))&&(u=u.toJSON(t));else if(u>-1/0&&u<1/0){if(p){for(m=f(u/864e5),g=f(m/365.2425)+1970-1;p(g+1,0)<=m;g++);for(v=f((m-p(g,0))/30.42);p(g,v+1)<=m;v++);m=1+m-p(g,v),_=(u%864e5+864e5)%864e5,E=f(_/36e5)%24,k=f(_/6e4)%60,x=f(_/1e3)%60,A=_%1e3}else g=u.getUTCFullYear(),v=u.getUTCMonth(),m=u.getUTCDate(),E=u.getUTCHours(),k=u.getUTCMinutes(),x=u.getUTCSeconds(),A=u.getUTCMilliseconds();u=(g<=0||g>=1e4?(g<0?"-":"+")+y(6,g<0?-g:g):y(4,g))+"-"+y(2,v+1)+"-"+y(2,m)+"T"+y(2,E)+":"+y(2,k)+":"+y(2,x)+"."+y(3,A)+"Z"}else u=null;if(n&&(u=n.call(e,t,u)),null===u)return"null";if("[object Boolean]"==(d=s.call(u)))return""+u;if("[object Number]"==d)return u>-1/0&&u<1/0?""+u:"null";if("[object String]"==d)return b(""+u);if("object"==typeof u){for(N=l.length;N--;)if(l[N]===u)throw TypeError();if(l.push(u),C=[],j=h,h+=c,"[object Array]"==d){for(T=0,N=u.length;T<N;T++)S=w(T,u,n,a,c,h,l),C.push(S===o?"null":S);O=C.length?c?"[\n"+h+C.join(",\n"+h)+"\n"+j+"]":"["+C.join(",")+"]":"[]"}else i(a||u,function(t){var e=w(t,u,n,a,c,h,l);e!==o&&C.push(b(t)+":"+(c?" ":"")+e)}),O=C.length?c?"{\n"+h+C.join(",\n"+h)+"\n"+j+"}":"{"+C.join(",")+"}":"{}";return l.pop(),O}};h.stringify=function(t,e,n){var r,i,o,a;if("function"==typeof e||"object"==typeof e&&e)if("[object Function]"==(a=s.call(e)))i=e;else if("[object Array]"==a){o={};for(var c,h=0,l=e.length;h<l;c=e[h++],("[object String]"==(a=s.call(c))||"[object Number]"==a)&&(o[c]=1));}if(n)if("[object Number]"==(a=s.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return w("",(c={},c[""]=t,c),i,o,r,"",[])}}if(!e("json-parse")){var _,E,k=String.fromCharCode,x={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw _=E=null,SyntaxError()},C=function(){for(var t,e,n,r,i,o=E,s=o.length;_<s;)switch(i=o.charCodeAt(_)){case 9:case 10:case 13:case 32:_++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=u?o.charAt(_):o[_],_++,t;case 34:for(t="@",_++;_<s;)if((i=o.charCodeAt(_))<32)A();else if(92==i)switch(i=o.charCodeAt(++_)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=x[i],_++;break;case 117:for(e=++_,n=_+4;_<n;_++)(i=o.charCodeAt(_))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||A();t+=k("0x"+o.slice(e,_));break;default:A()}else{if(34==i)break;for(i=o.charCodeAt(_),e=_;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++_);t+=o.slice(e,_)}if(34==o.charCodeAt(_))return _++,t;A();default:if(e=_,45==i&&(r=!0,i=o.charCodeAt(++_)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(_+1))>=48&&i<=57&&A(),r=!1;_<s&&(i=o.charCodeAt(_))>=48&&i<=57;_++);if(46==o.charCodeAt(_)){for(n=++_;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==_&&A(),_=n}if(101==(i=o.charCodeAt(_))||69==i){for(i=o.charCodeAt(++_),43!=i&&45!=i||_++,n=_;n<s&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==_&&A(),_=n}return+o.slice(e,_)}if(r&&A(),"true"==o.slice(_,_+4))return _+=4,!0;if("false"==o.slice(_,_+5))return _+=5,!1;if("null"==o.slice(_,_+4))return _+=4,null;A()}return"$"},S=function(t){var e,n;if("$"==t&&A(),"string"==typeof t){if("@"==(u?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=C());n||(n=!0))n&&(","==t?"]"==(t=C())&&A():A()),","==t&&A(),e.push(S(t));return e}if("{"==t){for(e={};"}"!=(t=C());n||(n=!0))n&&(","==t?"}"==(t=C())&&A():A()),","!=t&&"string"==typeof t&&"@"==(u?t.charAt(0):t[0])&&":"==C()||A(),e[t.slice(1)]=S(C());return e}A()}return t},T=function(t,e,n){var r=N(t,e,n);r===o?delete t[e]:t[e]=r},N=function(t,e,n){var r,o=t[e];if("object"==typeof o&&o)if("[object Array]"==s.call(o))for(r=o.length;r--;)T(o,r,n);else i(o,function(t){T(o,t,n)});return n.call(t,e,o)};h.parse=function(t,e){var n,r;return _=0,E=""+t,n=S(C()),"$"!=C()&&A(),_=E=null,e&&"[object Function]"==s.call(e)?N((r={},r[""]=n,r),"",e):n}}}a&&define(function(){return h})}(this)},{}],49:[function(t,e,n){function r(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}e.exports=r},{}],50:[function(t,e,n){function r(t){var e,n,r,i="",o=0;for(e=n=0;o<t.length;)e=t.charCodeAt(o),e<128?(i+=String.fromCharCode(e),o++):e>191&&e<224?(n=t.charCodeAt(o+1),i+=String.fromCharCode((31&e)<<6|63&n),o+=2):(n=t.charCodeAt(o+1),r=t.charCodeAt(o+2),i+=String.fromCharCode((15&e)<<12|(63&n)<<6|63&r),o+=3);return i}e.exports=r},{}],51:[function(t,e,n){(function(t){!function(r){function i(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function o(t){for(var e,n=t.length,r=-1,i="";++r<n;)e=t[r],e>65535&&(e-=65536,i+=y(e>>>10&1023|55296),e=56320|1023&e),i+=y(e);return i}function s(t,e){return y(t>>e&63|128)}function a(t){if(0==(4294967168&t))return y(t);var e="";return 0==(4294965248&t)?e=y(t>>6&31|192):0==(4294901760&t)?(e=y(t>>12&15|224),e+=s(t,6)):0==(4292870144&t)&&(e=y(t>>18&7|240),e+=s(t,12),e+=s(t,6)),e+=y(63&t|128)}function c(t){for(var e,n=i(t),r=n.length,o=-1,s="";++o<r;)e=n[o],s+=a(e);return s}function h(){if(m>=v)throw Error("Invalid byte index");var t=255&g[m];if(m++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function l(){var t,e,n,r,i;if(m>v)throw Error("Invalid byte index");if(m==v)return!1;if(t=255&g[m],m++,0==(128&t))return t;if(192==(224&t)){var e=h();if((i=(31&t)<<6|e)>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=h(),n=h(),(i=(15&t)<<12|e<<6|n)>=2048)return i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=h(),n=h(),r=h(),(i=(15&t)<<18|e<<12|n<<6|r)>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}function u(t){g=i(t),v=g.length,m=0;for(var e,n=[];(e=l())!==!1;)n.push(e);return o(n)}var f="object"==typeof n&&n,d="object"==typeof e&&e&&e.exports==f&&e,p="object"==typeof t&&t;p.global!==p&&p.window!==p||(r=p);var g,v,m,y=String.fromCharCode,b={version:"2.0.0",encode:c,decode:u};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(f&&!f.nodeType)if(d)d.exports=b;else{var w={},_=w.hasOwnProperty;for(var E in b)_.call(b,E)&&(f[E]=b[E])}else r.utf8=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(t,e,n){function r(t){var e=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n]]=!0;return e};this.opts={elToObserve:"body",elToExclude:"",eventToSender:[],eventToReceiver:[],enable:function(){},disable:function(){},mode:"disabled",jQuery:!1,_$elToObserve:!1,_$elToExclude:!1,_map_Global:{jQueryPath_document:document,jQueryPath_window:window,window:"jQueryPath_window",document:"jQueryPath_document"}};var n={};this.passiveCobrowsing=!1,this.setPassiveCobrowsing=function(t){this.passiveCobrowsing=t},this.isPassiveCobrowsing=function(){return this.passiveCobrowsing},this.updateElToObserve=function(t){return this.opts.elToObserve=t,this.opts._$elToObserve=this.opts.jQuery(t),this},this.updateElToExclude=function(t){return this.opts.elToExclude=t,this.opts._$elToExclude=this.opts.jQuery(t),this},this.getEventHandler=function(t){return t?n[t]:n},this.get_jQDocument=function(){var t=this.opts._$elToObserve;return t.is("body")||(t=t.parents("body")),t.parent().parent()},this.get_jQWindow=function(){var t=this.get_jQDocument()[0];return null!=t&&this.opts.jQuery("object"==typeof t&&"defaultView"in t?t.defaultView:t.parentWindow)},this.simulateMouseEvent=function(t,e){this.simulateMouseEvent.previousTarget||(this.simulateMouseEvent.previousTarget={});var n={mouseover:"mouseout",mouseenter:"mouseleave",click:""},r=this.simulateMouseEvent.previousTarget[t];if(t in n&&e&&e.dispatchEvent){if(n[t]){if(r){var i=null;try{i=new MouseEvent(n[t],{view:window,bubbles:!0,cancelable:!0})}catch(e){i=document.createEvent("MouseEvent"),i.initMouseEvent(n[t],!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)}r.dispatchEvent(i)}this.simulateMouseEvent.previousTarget[t]=e}var o=null;try{o=new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0})}catch(e){o=document.createEvent("MouseEvent"),o.initMouseEvent(t,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null)}e.dispatchEvent(o)}},this.receiverDispatcher=function(t){var e=null,r=null;try{e="string"==typeof t?i.parse(iAdvize.html_entity_decode(t)):t}catch(t){e=null}try{if(e.i.indexOf("jQueryPath_")!=-1){if(e.i==this.opts._map_Global.document)r=this.get_jQDocument();else if(e.i==this.opts._map_Global.window)try{if((r=this.get_jQWindow())===!1)throw new Error("Window undefined :'(")}catch(t){r=null}}else null!=e.i&&(r=this.get_jQDocument().find(e.i))}catch(t){}null!==e&&r&&(e.iframe&&""!=e.iframe&&(r=this.opts._$elToObserve.find("#"+e.iframe).contents().find(e.i)),this.opts.eventToReceiver[e.type]&&n[e.type]&&n[e.type].onReceive?n[e.type].onReceive(r,e):this.opts.eventToReceiver.default&&n.default.onReceive(r,e))},this._senderBuffer=[],this.sender=function(t){this._senderBuffer.push(i.stringify(t)),this._throttledSender()},this._throttledSender=iAdvize.Utils.throttle(350,function(){for(var t=0,e=this._senderBuffer.length;t<e;t++)this._sender(this._senderBuffer[t]);this._senderBuffer=[]}),this._sender=function(t){var e=iAdvize.require("xmpp");e.getConnection().send($msg({to:Strophe.getBareJidFromJid(iAdvize.operator.barejid)+"/operators",from:e.getConnection().jid,type:"command"}).c("body").t("!magic_event "+t).tree())},this.updateSenderMethod=function(t){this._sender=t},this.eventDispatcher=function(t){if(!t||!t.target)return!0;var e=this.opts.jQuery(t.target);if(!e)return!0;var r=e.data("MagicEvent_path");return r||(r=this.opts.jQuery.getjQueryPath(t.target),r=r.replace("body>div",'body>div:not(div[id^="idz_"])'),e.data("MagicEvent_path",r)),!(r==this.opts._map_Global.window||r==this.opts._map_Global.document||!this.opts._$elToExclude||1!=this.opts._$elToExclude.has(t.target).length)||(this.opts.eventToSender[t.type]&&n[t.type]&&n[t.type].EventHandler?n[t.type].EventHandler(t,r):this.opts.eventToSender.default&&n.default.EventHandler(t,r),!0)},this.forceEventHandler=function(t,e){n[t].EventHandler(e)},this.forceOnReceive=function(t,e,r){if(!n[t]||"function"!=typeof n[t].onReceive)return!1;n[t].onReceive(e,r)},this.changeState=function(t){o.info("state","magicEvent",t);var e="disabled",r="disabled";if("sender"==this.opts.mode?e="Sender":"receiver"==this.opts.mode&&(e="Receiver"),"sender"==this.opts.mode){var i=this.opts["eventTo"+e];for(var s in i)n[s]&&n[s].disable()}if(this.opts["on"+e+"Disable"]&&this.opts["on"+e+"Disable"].call(this),this.opts.mode=t,"sender"==t?r="Sender":"receiver"==t&&(r="Receiver"),"sender"===t){var i=this.opts["eventTo"+r];for(var s in i)n[s]&&n[s].enable()}
return this.opts["on"+r+"Enable"]&&this.opts["on"+r+"Enable"].call(this),this},this.refreshState=function(){o.info("state","refreshState",this.opts.mode),this.changeState(this.opts.mode)},this.Helper_IntelliZoom=function(t,e){var n=this._magicEvent,r=n.get_jQWindow();if(r&&n.distantWinWidth>r.width()){var i=n.opts.jQuery,o=(n.localWinWidth=n.opts._$elToObserve.width(),t-r.width()/2);i("html, body",n.get_jQDocument()).stop().animate({scrollLeft:o},500)}},this.addEventHandler=function(t,e,r){n[t]&&delete n[t];var i={enable:function(){this._magicEvent.opts._$elToObserve.bind(t,this._magicEvent.eventDispatcher)},disable:function(){this._magicEvent.opts._$elToObserve.unbind(t)},onReceive:function(t){}};if(this.opts.jQuery.extend(i,e),n[t]=i,n[t]._magicEvent=this,n[t]._intelliZoom=this.Helper_IntelliZoom,r&&r.mustBeBuffered)for(var o=r.mustBeBuffered.length;o--;)n[t][r.mustBeBuffered[o]]=iAdvize.Utils.throttle(n[t]._sampleDelay,n[t][r.mustBeBuffered[o]])},this.editEventHandler=function(t,e,r,i){var o=i||!1;if(n[t]&&n[t][e])if(o){var s=n[t][e];n[t][e]=function(){return function(){"before"!=o&&s.apply(this,arguments),r.apply(this,arguments),"before"==o&&s.apply(this,arguments)}}()}else n[t][e]=r;return this},this.init=function(t){t.jQuery.extend(this.opts,t),this.opts.jQuery.proxy||(this.opts.jQuery.proxy=this.opts.jQuery.fn.proxy=function(t,e){return function(){return t.apply(e||window,Array.prototype.slice.call(arguments))}}),this.eventDispatcher=this.opts.jQuery.proxy(this.eventDispatcher,this),this.opts._$elToObserve=this.opts.jQuery("function"==typeof this.opts.elToObserve?this.opts.elToObserve():this.opts.elToObserve),this.opts.elToExclude&&(this.opts._$elToExclude=this.opts.jQuery(this.opts.elToExclude)),this.opts.eventToSender=e(this.opts.eventToSender),this.opts.eventToReceiver=e(this.opts.eventToReceiver),this.addEventHandler("default",new function(){for(var t=["blur","change","select"],e="",n=0,r=t.length;n<r;n++)e+=t[n]+".magicEvent ";this.enable=function(){this._magicEvent.opts._$elToObserve.bind(e,this._magicEvent.eventDispatcher),this._magicEvent.opts._$elToObserve.on("focus.magicEvent","input, textarea",this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(e,this._magicEvent.eventDispatcher),this._magicEvent.opts._$elToObserve.off("focus.magicEvent","input, textarea",this._magicEvent.eventDispatcher)},this.onReceive=function(t,e){if(!e.passive){var n=e.type;t.attr("value",t.val()),"change"!=n&&"blur"!=n||""==e.data||(t.val(unescape(e.data)),"change"==n&&t&&t[0]&&t[0].value&&(t[0].value=unescape(e.data))),t.fireEvent(e.type)}},this.EventHandler=function(t,e){var n=this._magicEvent.opts.jQuery(t.target),r=t.type,i={i:e,type:r,passive:this._magicEvent.passiveCobrowsing,data:null};if(n.attr("value",n.val()),"change"===r||"blur"===r||"focusin"===r||"select"===r){var o=n.val();("password"===n.attr("type")||"idzhide"===n.attr("rel")||"CreditCardNumber"===n.attr("id")||"CVV2"===n.attr("id")||n.hasClass("idz_hide"))&&(o=Array(n.val().length+1).join("*")),i.data=escape(o)}this._magicEvent.sender(i)}}),this.addEventHandler("click",new function(){var t="click.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(t,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(t,this._magicEvent.eventDispatcher)},this.onReceive=function(t,e){e.passive||t.fireEvent(e.type)},this.EventHandler=function(t,e){this._magicEvent.sender({i:e,type:"click",passive:this._magicEvent.passiveCobrowsing,data:{x:t.pageX,y:t.pageY}})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("resize",new function(){var t="resize.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.distantWinWidth=0,this._magicEvent.localWinWidth=0;var e=this._magicEvent.get_jQWindow();e!==!1&&(e.bind(t,this._magicEvent.eventDispatcher),this._magicEvent.localWinWidth=e.width()),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})},this.disable=function(){var e=this._magicEvent.get_jQWindow();e!==!1&&e.unbind(t)},this.onReceive=function(t,e){alert("Not implemented !")},this.EventHandler=function(t){var e=this._magicEvent.get_jQWindow();if(e!==!1){var n=e.width();if(this._magicEvent.localWinWidth==n)return!0;this._magicEvent.localWinWidth=n,this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"resize",data:{w:this._magicEvent.localWinWidth}})}}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("scroll",new function(){this._sampleDelay=2450,this.documentScrollX=this.documentScrollY=0,this.scrollableElements=[],this.enable=function(){var t=this;document.addEventListener("scroll",t._magicEvent.eventDispatcher,!0);var e=this._magicEvent.get_jQDocument();"sender"===this._magicEvent.opts.mode&&(this.documentScrollX=e.scrollLeft(),this.documentScrollY=e.scrollTop(),this._magicEvent.sender({i:this._magicEvent.opts._map_Global.document,type:"scroll",data:{x:this.documentScrollX,y:this.documentScrollY}}))},this.disable=function(){var t=this;document.removeEventListener("scroll",t._magicEvent.eventDispatcher,!0)},this.onReceive=function(t,e){alert("Not implemented !")},this.getElementInArray=function(t){var e;return this.scrollableElements.forEach(function(n){n.element===t&&(e=n)}),e},this.populateElement=function(t,e,n){var r=this.getElementInArray(t);return 0===this.scrollableElements.length?(r={element:t,scrollX:e,lastSendScrollX:e,scrollY:n,lastSendScrollY:n},this.scrollableElements.push(r)):r?(r.scrollX=e,r.scrollY=n):(r={element:t,scrollX:e,scrollY:n},this.scrollableElements.push(r)),r},this.EventHandler=function(t,e){var n=this._magicEvent.opts.jQuery(t.target).scrollLeft(),r=this._magicEvent.opts.jQuery(t.target).scrollTop(),i=this.populateElement(t.target,n,r);if(i.scrollX===i.lastSendScrollX&&i.scrollY===i.lastSendScrollY)return!0;i.lastSendScrollX=i.scrollX,i.lastSendScrollY=i.scrollY,this._magicEvent.sender({i:e,type:"scroll",data:{x:n,y:r}})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("keyup",new function(){var t="keyup.magicEvent";this._sampleDelay=2450,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(t,this._magicEvent.eventDispatcher)},this.disable=function(e){this._magicEvent.opts._$elToObserve.unbind(t)},this.onReceive=function(t,e){e.passive||(t[0].dispatchEvent(new KeyboardEvent("keydown")),t[0].dispatchEvent(new KeyboardEvent("keypress")),t.val(unescape(e.data)),t[0].dispatchEvent(new KeyboardEvent("keyup")))},this.EventHandler=function(t,e){var n=this._magicEvent.opts.jQuery(t.target),r=n.val();("password"===n.attr("type")||"idzhide"===n.attr("rel")||"CreditCardNumber"===n.attr("id")||"CVV2"===n.attr("id")||n.hasClass("idz_hide"))&&(r=Array(r.length+1).join("*")),this._magicEvent.sender({i:e,type:"keyup",passive:this._magicEvent.passiveCobrowsing,data:escape(r)})}},{mustBeBuffered:["EventHandler"]}),this.addEventHandler("mousemove",new function(){var t="mousemove.magicEvent";this._sampleDelay=2450,this.mouseX=0,this.mouseY=0,this.lastSendMouseX=0,this.lastSendMouseY=0,this.enable=function(){this._magicEvent.opts._$elToObserve.bind(t,this._magicEvent.eventDispatcher)},this.disable=function(){this._magicEvent.opts._$elToObserve.unbind(t)},this.onReceive=function(t){alert("Not implemented !")},this.EventHandler=function(t,e){if(this.mouseX=t.pageX,this.mouseY=t.pageY,this.lastSendMouseX==this.mouseX||this.lastSendMouseY==this.mouseY)return!0;this._magicEvent.sender({i:this._magicEvent.opts._map_Global.window,type:"mousemove",data:{x:this.mouseX,y:this.mouseY},selector:e}),this.lastSendMouseX=this.mouseX,this.lastSendMouseY=this.mouseY}},{mustBeBuffered:["EventHandler"]}),this.opts.jQuery.fireEvent||function(t,e){t.fireEvent=function(e,r,i){if(void 0===e)return!1;var o;if(!n[r])return!1;void 0!==document.createEvent?(o=document.createEvent(n[r].w3c),n[r].initEvt(o,e,i),e.dispatchEvent(o)):"click"==r?(t(e).click(),e.fireEvent(n[r].ie)):e.fireEvent(n[r].ie)},t.fn.fireEvent=function(e,n){return 0==this.length?this:(t.fireEvent.call({},this[0],e,n),this)};var n={click:{ie:"onclick",w3c:"MouseEvents",initEvt:function(e,n,r){var i=t.extend({type:"click",canBubble:!0,cancelable:!0,view:window,detail:1,screenX:1,screenY:1,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:n},r);e.initMouseEvent(i.type,i.canBubble,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)}},dblclick:{ie:"ondblclick",w3c:"MouseEvents",initEvt:function(e,r,i){n.click.initEvt(e,r,t.extend({type:"dblclick"},i))}},keyup:{ie:"onkeyup",w3c:"KeyboardEvent",initEvt:function(e,n,r){var i=t.extend({keyCode:null,CharCode:null},r);e.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,i.keyCode,i.CharCode)}},blur:{ie:"onblur",w3c:"HTMLEvents",initEvt:function(t,e,n){t.initEvent("blur",!0,!0)}},focus:{ie:"onfocus",w3c:"HTMLEvents",initEvt:function(t,e,n){t.initEvent("focus",!0,!0)}},focusin:{ie:"onfocus",w3c:"HTMLEvents",initEvt:function(t,e,n){t.initEvent("focus",!0,!0)}},change:{ie:"onchange",w3c:"HTMLEvents",initEvt:function(t,e,n){t.initEvent("change",!0,!0)}},select:{ie:"onselect",w3c:"HTMLEvents",initEvt:function(t,e,n){t.initEvent("select",!0,!0)}}}}(this.opts.jQuery),this.opts.jQuery.getjQueryPath||function(t){var e=function(){try{var e=t("<div><p></p><p></p></div>")[0].childNodes[1];return e.previousElementSibling&&"object"==typeof e.previousElementSibling?function(t){return t.previousElementSibling}:function(e){return t(e).prev()[0]}}catch(t){return!1}}(),n=function(t){if(null===t.previousElementSibling)return 0;for(var n=t,r=0,i=t.nodeName;n=e(n);)n.nodeName==i&&r++;return r},r=function(t,e){var r=e||!1,i="";i+=t.nodeName.toLowerCase();var o=n(t);return(o||r)&&(i+=":eq("+o+")"),i};t.getjQueryPath=function(t){if(!t)return!1;if(t.nodeName&&"#document"==t.nodeName.toLowerCase())return"jQueryPath_document";if(t.location)return"jQueryPath_window";for(var e=r(t,!0);t.parentNode&&"#document"!==t.parentNode.nodeName;)t=t.parentNode,e=r(t)+">"+e;return e}}(this.opts.jQuery)},this.init(t)}var i=t("json3"),o=t("./inc/logger");e.exports=r,"undefined"==typeof iAdvize&&(iAdvize={}),void 0===iAdvize.Utils&&(iAdvize.Utils={}),iAdvize.Utils.throttle||function(t){var e;iAdvize.Utils.throttle=e=function(e,n,r,i){function o(){function o(){a=+new Date,r.apply(h,u)}function c(){s=t}var h=this,l=+new Date-a,u=arguments;i&&!s&&o(),s&&clearTimeout(s),i===t&&l>e?o():n!==!0&&(s=setTimeout(i?c:o,i===t?e-l:e))}var s,a=0;return"boolean"!=typeof n&&(i=r,r=n,n=t),o},iAdvize.Utils.debounce=function(n,r,i){return i===t?e(n,r,!1):e(n,i,r!==!1)}}(),iAdvize.html_entity_decode||(iAdvize.get_html_translation_table=function(t,e){var n={},r={},i=0,o="",s={},a={},c={},h={};if(s[0]="HTML_SPECIALCHARS",s[1]="HTML_ENTITIES",a[0]="ENT_NOQUOTES",a[2]="ENT_COMPAT",a[3]="ENT_QUOTES",c=isNaN(t)?t?t.toUpperCase():"HTML_SPECIALCHARS":s[t],h=isNaN(e)?e?e.toUpperCase():"ENT_COMPAT":a[e],"HTML_SPECIALCHARS"!==c&&"HTML_ENTITIES"!==c)throw new Error("Table: "+c+" not supported");n[38]="&amp;","HTML_ENTITIES"===c&&(n[160]="&nbsp;",n[161]="&iexcl;",n[162]="&cent;",n[163]="&pound;",n[164]="&curren;",n[165]="&yen;",n[166]="&brvbar;",n[167]="&sect;",n[168]="&uml;",n[169]="&copy;",n[170]="&ordf;",n[171]="&laquo;",n[172]="&not;",n[173]="&shy;",n[174]="&reg;",n[175]="&macr;",n[176]="&deg;",n[177]="&plusmn;",n[178]="&sup2;",n[179]="&sup3;",n[180]="&acute;",n[181]="&micro;",n[182]="&para;",n[183]="&middot;",n[184]="&cedil;",n[185]="&sup1;",n[186]="&ordm;",n[187]="&raquo;",n[188]="&frac14;",n[189]="&frac12;",n[190]="&frac34;",n[191]="&iquest;",n[192]="&Agrave;",n[193]="&Aacute;",n[194]="&Acirc;",n[195]="&Atilde;",n[196]="&Auml;",n[197]="&Aring;",n[198]="&AElig;",n[199]="&Ccedil;",n[200]="&Egrave;",n[201]="&Eacute;",n[202]="&Ecirc;",n[203]="&Euml;",n[204]="&Igrave;",n[205]="&Iacute;",n[206]="&Icirc;",n[207]="&Iuml;",n[208]="&ETH;",n[209]="&Ntilde;",n[210]="&Ograve;",n[211]="&Oacute;",n[212]="&Ocirc;",n[213]="&Otilde;",n[214]="&Ouml;",n[215]="&times;",n[216]="&Oslash;",n[217]="&Ugrave;",n[218]="&Uacute;",n[219]="&Ucirc;",n[220]="&Uuml;",n[221]="&Yacute;",n[222]="&THORN;",n[223]="&szlig;",n[224]="&agrave;",n[225]="&aacute;",n[226]="&acirc;",n[227]="&atilde;",n[228]="&auml;",n[229]="&aring;",n[230]="&aelig;",n[231]="&ccedil;",n[232]="&egrave;",n[233]="&eacute;",n[234]="&ecirc;",n[235]="&euml;",n[236]="&igrave;",n[237]="&iacute;",n[238]="&icirc;",n[239]="&iuml;",n[240]="&eth;",n[241]="&ntilde;",n[242]="&ograve;",n[243]="&oacute;",n[244]="&ocirc;",n[245]="&otilde;",n[246]="&ouml;",n[247]="&divide;",n[248]="&oslash;",n[249]="&ugrave;",n[250]="&uacute;",n[251]="&ucirc;",n[252]="&uuml;",n[253]="&yacute;",n[254]="&thorn;",n[255]="&yuml;"),"ENT_NOQUOTES"!==h&&(n[34]="&quot;"),"ENT_QUOTES"===h&&(n[39]="&#39;"),n[60]="&lt;",n[62]="&gt;";for(i in n)o=String.fromCharCode(i),r[o]=n[i];return r},iAdvize.html_entity_decode=function(t,e){var n={},r="",i="",o="";if(i=t.toString(),!1===(n=iAdvize.get_html_translation_table("HTML_ENTITIES",e)))return!1;delete n["&"],n["&"]="&amp;";for(r in n)o=n[r],i=i.split(o).join(r);return i=i.split("&#039;").join("'")})},{"./inc/logger":59,json3:32}],53:[function(t,e,n){e.exports={socket:{host:"https://"+iAdvize.mirrorHost,vuid:iAdvize.vuid,websiteId:iAdvize.website_id},proxy:{hosts:{proxify:"https://"+iAdvize.mirrorHost+"/proxify/",base:"https://"+iAdvize.mirrorHost+"/baseproxy/",rewrite:"https://"+iAdvize.mirrorHost+"/rewrite/"},proxyfiedTags:{img:{"data-src":!1,src:!1,srcset:!1},link:{href:!0},source:{src:!1,srcset:!1},input:{src:!1},form:{action:!1}}},dom:{textTree:{updateInterval:1e3},excludedElements:["script","title","#idz_chatglobal","#idz_btn","#idz_bottompad","#idz_chatbar_mini","#idz_sound_container","#visitor_cursor","#anim_clic","#idz_writting",".avast-extension-safeshop-bar","head img",'object[type="text/x-scriptlet"]','object[type="text/javascript"]','object[type="application/javascript"]','object[type="text/ecmascript"]','object[type="application/ecmascript"]','object[type="application/postscript"]',"object[classid]"],canvas:{algorithm:"image/jpeg",quality:.9,interval:500,initialDelay:5e3,cacheSize:1048576},hiddenElements:{".idz_hide":"lock",'input[rel="idzhide"]':"lock",'input[type="password"]':"lock",'object[type="text/html"]':"lock",'object[type="application/pdf"]':"pdf",'object[type="application/x-shockwave-flash"]':"flash",applet:"applet"},hiddenTagsStyle:{"background-color":"#DDD",border:"border: #AAA solid 1px","border-radius":"5px","vertical-align":"middle","background-position":"center","background-repeat":"no-repeat","background-image":'url("/pupitre/img/bg_mirroring_{icon}.png")'}},events:{excludedElements:["#idz_chatglobal"],handledEvents:["default","click","resize","keyup","mousemove","scroll"]}}},{}],54:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return{refreshTimeout:null,cache:{hashes:[],lengths:[],data:[],size:0}}}function r(t){var e,n,r,i=0;if(0==t.length)return i;for(e=0,r=t.length;e<r;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}function i(n,i){var o=e("canvas");if(e("iframe.idz_iframe").each(function(){o=o.add(e(this).contents().find("canvas"))}),!o.length&&i&&"function"==typeof i)return void i(n);o.each(function(){var i=e(this),o=i.hasClass("idz_canvas_png")?"image/png":t.algorithm,s=this.toDataURL(o,t.quality),a=r(s);n.cache.hashes.indexOf(a)>-1?i.attr(h,a).removeAttr(c):(i.attr(c,s).removeAttr(h),n.cache.hashes.push(a),n.cache.lengths.push(s.length),n.cache.size+=s.length,n.cache.size>t.cacheSize&&(n.cache.hashes.shift(),n.cache.size-=n.cache.lengths.shift()))})}function o(e,n){var i=r(n).toString();e.cache.hashes.indexOf(i)===-1&&(e.cache.hashes.push(i),e.cache.data.push(n),e.cache.size+=n.length,e.cache.size>t.cacheSize&&(e.cache.hashes.shift(),e.cache.size-=e.cache.data.shift().length))}function s(t,e){var n=t.cache.hashes.indexOf(e);return n>-1?t.cache.data[n]:null}function a(t,e){if(e){var n=t.getContext("2d"),r=new Image;r.src=e,r.onload=function(){n.clearRect(0,0,t.width,t.height),n.drawImage(r,0,0,r.width,r.height,0,0,t.width,t.height)}}}var c="data-plainctx",h="data-cachedctx";return{projector:{dmo:{getInitialData:n,serialize:function(e,n){e.refreshTimeout||n||setTimeout(function(){e.refreshTimeout=setInterval(function(){i(e,function(t){clearInterval(t.refreshTimeout),t.refreshTimeout=null})},t.interval)},t.initialDelay)}},text:{getInitialData:n,serialize:i}},viewer:{dmo:{getInitialData:n,unserialize:function(t,e,n,r){var i=null;e===c?(i=n,o(t,n)):e===h&&(i=s(t,n)),a(r,i)}},text:{getInitialData:n,unserialize:function(t,e){e.find("canvas").each(function(){var e=this.getAttribute(c),n=this.getAttribute(h),r=null;e?(r=e,o(t,e)):n&&(r=s(t,n.toString())),a(this,r)})}}}}}},{}],55:[function(t,e,n){"use strict";e.exports=function(t,e){var n=function(){var e=[];for(var n in t.hiddenElements)t.hiddenElements.hasOwnProperty(n)&&e.push(n);return e}(),r=n.join(",");return{projector:{dmo:{isHidden:function(t){return e(t).is(r)},changeNodeAttributes:function(e,r){var i,o,s=["id","class","style"],a={};for(i=0,o=s.length;i<o;i++)e.attributes[s[i]]&&(a[s[i]]=e.attributes[s[i]]);e.attributes=a;var c=parseInt(r.css("width"),10)+parseInt(r.css("border-left-width"),10)+parseInt(r.css("border-right-width"),10)-2,h=parseInt(r.css("height"),10)+parseInt(r.css("border-top-width"),10)+parseInt(r.css("border-bottom-width"),10)-2,l="inline"===r.css("display")?"inline-block":r.css("display");e.tagName="DIV",e.attributes.style=e.attributes.style||"",e.attributes.style+=";display:"+l,e.attributes.style+=";width:"+c+"px",e.attributes.style+=";height:"+h+"px",e.attributes["data-width"]=c,e.attributes["data-height"]=h;var u=["float","position","top","left","right","bottom","margin","padding"];for(i=0,o=u.length;i<o;i++)e.attributes.style+=";"+u[i]+":"+r.css(u[i]);return e.isHidden=!0,n.forEach(function(n){r.is(n)&&(e.hiddenIcon=t.hiddenElements[n])}),e}},text:{markAll:function(){e(r).each(function(t){var n=e(this);n.addClass("idz_hide idz_hide-"+t),n.attr("data-idz_hide",t)})},isHidden:function(t){return t.hasClass("idz_hide")},changeNodeAttributes:function(t){var n=t;return t.find(".idz_hide").addBack(".idz_hide").each(function(){var r,i,o=e(this),s=e(".idz_hide-"+o.attr("data-idz_hide")),a=e("inline"===s.css("display")?"<span>":"<div>"),c=["id","class","style","data-width","data-height"],h=["float","position","top","left","right","bottom","margin","padding"];for(r=0,i=c.length;r<i;r++)o.attr(c[r])&&a.attr(c[r],o.attr(c[r]));var l=parseInt(s.css("width"),10)+parseInt(s.css("border-left-width"),10)+parseInt(s.css("border-right-width"),10)-2,u=parseInt(s.css("height"),10)+parseInt(s.css("border-top-width"),10)+parseInt(s.css("border-bottom-width"),10)-2,f="inline"===s.css("display")?"inline-block":s.css("display");for(a.css("display",f),a.css("width",l+"px"),a.css("height",u+"px"),a.attr("data-width",l),a.attr("data-height",u),r=0,i=h.length;r<i;r++)a.css(h[r],s.css(h[r]));o.replaceWith(a),o.is(t)&&(n=a)}),n}}},viewer:{dmo:{isHidden:function(t){return t.isHidden||t.nodeName&&t.className.indexOf("idz_hide")!==-1},changeNodeAttributes:function(e){return"INPUT"===e.tagName?(e.attributes.disabled="disabled",e.attributes.value=e.attributes.value?Array(e.attributes.value.length+1).join("*"):"",e.value&&(e.value=Array(e.value.length+1).join("*"))):Object.keys(t.hiddenTagsStyle).forEach(function(n){("background-image"!==n||e.attributes["data-width"]>=50&&e.attributes["data-height"]>=50)&&(e.attributes.style+=";"+n+": "+t.hiddenTagsStyle[n].replace("{icon}",e.hiddenIcon))}),e.attributes.class&&e.attributes.class.indexOf("idz_hide")!==-1||(e.attributes.class=e.attributes.class||"",e.attributes.class+=" idz_hide"),e}},text:{changeNodeAttributes:function(n){n.find(".idz_hide").each(function(){var n=e(this);for(var r in t.hiddenTagsStyle)t.hiddenTagsStyle.hasOwnProperty(r)&&("background-image"!==r||n.attr("data-width")>=50&&n.attr("data-height")>=50)&&(n.css(r,t.hiddenTagsStyle[r]),"background-image"===r&&n.css(r,t.hiddenTagsStyle[r].replace("/",window.parent.location.origin+"/").replace("{icon}","lock")))})}}}}}},{}],56:[function(t,e,n){"use strict";e.exports=function(t,e){return{projector:{dmo:{isMirrored:function(t){return t.className.indexOf("idz_iframe")!==-1},serialize:function(n,r,i,o,s,a){var c=r.className,h=c.indexOf("idz_loading_iframe")!==-1,l=c.indexOf("idz_loaded_iframe")!==-1,u=c.indexOf("idz_mirrored_iframe-")!==-1,f=null,d=null;try{f=r.contentDocument.querySelector("head"),d=r.contentDocument.querySelector("body")}catch(n){t.info("iframe",n),f=e("<head>")[0],d=e("<body>")[0]}if(u||h){if(!u&&l){var p=r.getAttribute("data-idz-iframe");r.className+=" idz_mirrored_iframe-"+p,n.attributes.id=n.attributes.id||"idz-iframe-"+p,n.contentDocumentHead=o.call(s,f,!0,null),n.contentDocumentBody=o.call(s,d,!0,null),a(p)}}else{var g=i.length-1;i.push(null),r.className+=" idz_loading_iframe",r.setAttribute("data-idz-iframe",g),n.attributes.id=n.attributes.id||"idz-iframe-"+g,d.innerHTML.length>0?setTimeout(function(){r.className+=" idz_loaded_iframe"},0):r.addEventListener("load",function(){r.className+=" idz_loaded_iframe"},!1)}}},text:{getInitialData:function(){return{count:0}},serialize:function(n,r,i,o){r.iframesHtml={},e("iframe.idz_iframe",i).each(function(i,s){var a=null;s.id||(n.count++,s.id="idz-iframe-"+n.count);try{a=e(s.contentDocument)}catch(n){t.info("iframe",n),a=e("<html>").append(e("<head>")).append(e("<body>"))}var c=a.find("head"),h=a.find("body");r.iframesHtml[s.id]=o(a,c,h)})},applyPatch:function(t,n,r,i,o,s,a){var c=!1;return r.iframesHtml={},e.each(n.iframesHtml,function(e){if(t.iframesHtml[e]){var h=i.call(a,t.iframesHtml[e],n.iframesHtml[e]);o(h)&&(c=!0,r.iframesHtml[e]=s.call(a,h),r.iframesHtml[e].patch=!0)}else r.iframesHtml[e]=n.iframesHtml[e],c=!0}),c}}},viewer:{dmo:{unserialize:function(t,e,n){if(t.contentDocumentBody){var r=e.querySelector("#"+t.attributes.id);r&&(r.onload=function(){var e=r.contentDocument.querySelector("head"),i=r.contentDocument.querySelector("body");e.parentNode.replaceChild(n(t.contentDocumentHead),e),i.parentNode.replaceChild(n(t.contentDocumentBody),i)}.bind(this),r.src="//"+iAdvize.mirrorHost+"/viewer/iframe/1"+(iAdvize.isOnIbbu?"?application=ibbu":""))}}},text:{updateDom:function(t,n,r){var i=t.iframesHtml||{};e.each(i,function(t,i){var o=e("iframe#"+t),s={};s.$html=e("html",o[0].contentDocument),s.$head=e("head",s.$html),s.$body=e("body",s.$html),n.call(r,s,i)})},patchDom:function(t,n,r,i,o){var s=t.iframesHtml||{};e.each(s,function(t,s){var a=e("iframe#"+t),c={};c.$html=e("html",a[0].contentDocument),c.$head=e("head",c.$html),c.$body=e("body",c.$html),s.patch?n.call(o,c,i.iframesHtml[t],s):(i.iframesHtml[t]=s,r.call(o,c,s))})}}}}}},{}],57:[function(t,e,n){"use strict";e.exports=function(t){return{projector:{dmo:{serialize:function(t,e){t.value=e.value,e.checked?t.attributes.checked="checked":delete t.attributes.checked}},text:{serialize:function(e){e.find("input, select").each(function(){var e=t(this);e.attr("value",e.val()),e.is("input:checkbox, input:radio")&&(e.is(":checked")?e.attr("checked","checked"):e.removeAttr("checked"))})}},events:{onMirroringEnabled:function(e){e.find("input").off("change.cobrowsing"),e.off("change.mirroring.checkboxes"),e.on("change.mirroring.checkboxes","input:checkbox, input:radio",function(){var e=t(this),n=e.is(":checked");"radio"===e.attr("type")?t('input[name="'+e.attr("name")+'"]').removeAttr("checked"):e.removeAttr("checked"),n&&e.attr("checked","checked").prop("checked",!0)})},onCobrowsingEnabled:function(e){e.find("input").off("change.cobrowsing").on("change.cobrowsing",function(){var e=t(this);e.attr("value",e.val())})}}},viewer:{dmo:{unserialize:function(t,e){t.getAttribute("value")&&(t.value=t.getAttribute("value")),t.getAttribute("checked")&&(t.checked=!0),e.value&&(t.value=e.value),"SELECT"===e.tagName&&e.childNodes&&e.childNodes.forEach(function(t){t.tagName&&"OPTION"===t.tagName&&(e.value===t.value?t.attributes.selected="selected":delete t.attributes.selected)})}},text:{unserialize:function(e){e.find("input, select").each(function(){var e=t(this);if(e.attr("value")&&e.val(e.attr("value")),"SELECT"===e[0].tagName){var n=e;t("option",e).each(function(){var e=t(this);e.prop("selected",e.attr("value")===n.val())})}})}}}}}},{}],58:[function(t,e,n){function r(t){var e=t.jQuery,n=t._$elToObserve,r=e("#visitor_cursor",n);return r.length||(r=e('<img src="https://static.iadvize.com/images/pupitre/visitor_cursor.png" id="visitor_cursor" style="position: absolute; z-index: 999999999999; top: -3000px; left: -3000px;"/>'),r.appendTo("body")),r}function i(t){var e=t.jQuery,n=t._$elToObserve,r=e("#anim_clic",n);return r.length||(r=e('<img src="https://static.iadvize.com/images/pupitre/anim_clic.gif" id="anim_clic" style="position: absolute; z-index: 999999999998; top: -3000px; left: -3000px;"/>'),r.appendTo(n)),r}function o(t,e){var n=this._magicEvent.opts._$elToObserve,o=r(this._magicEvent.opts),s=i(this._magicEvent.opts);if(null==e.data&&(e.data={}),!e.data.x&&1==t.length){var a=t.offset();e.data.x=a.left+t.width()/2,e.data.y=a.top}if(e.iframe&&""!=e.iframe){var c=n.find("#"+e.iframe).offset();e.data.x+=c.left,e.data.y+=c.top}this._intelliZoom(e.data.x,e.data.y),o.hide().css({top:parseInt(e.data.y,10)-30,left:parseInt(e.data.x,10)-30}),s.css({top:parseInt(e.data.y,10)-80,left:parseInt(e.data.x,10)-80}),setTimeout(function(){s.css({top:"-3000px",left:"-3000px"}),o.show()},800)}function s(t,e){var n=this._magicEvent.opts.jQuery(e.selector),i=r(this._magicEvent.opts);n.length&&this._magicEvent.simulateMouseEvent("mouseover",n[0]),e.data.x-=30,e.data.y-=30,this.mouseX=e.data.x,this.mouseY=e.data.y,i.stop().animate({top:this.mouseY,left:this.mouseX},650)}function a(t,e){"jQueryPath_document"===e.i&&(t=this._magicEvent.opts.jQuery("html,body"));var n={scrollTop:e.data.y};e.data.x>0&&(n.scrollLeft=e.data.x),t.stop().animate(n,700)}function c(t,e){return!!e.data.w&&((!e.iframe||""==e.iframe)&&void(this._magicEvent.distantWinWidth=e.data.w))}e.exports={onClickReceived:o,onMouseMoveReceived:s,onScrollReceived:a,onResizeReceived:c}},{}],59:[function(t,e,n){function r(){this.messages=[],this.disabled=[],this.consoleChannels=[],this.consoleLevels=["error"]}var i=window.iAdvize&&!window.iAdvize.chaturl?window.parent.iAdvize:window.iAdvize;i.mirroring=i.mirroring||{},e.exports=i.mirroring.logger=new r,r.prototype.log=function(t,e,n){var r=Array.prototype.slice.call(arguments);if(t=r.shift(),e=r.shift(),n=r,!(this.disabled.indexOf(e)>-1)){var i={date:(new Date).toJSON(),channel:e,message:n,level:t};this.messages.push(i),(this.consoleChannels.indexOf(e)>-1||this.consoleLevels.indexOf(t)>-1)&&this.displayLine(i)}},r.prototype.enable=function(t){var e=this.disabled.indexOf(t);e>-1&&this.disabled.splice(e,1)},r.prototype.disable=function(t){this.disabled.indexOf(t)===-1&&this.disabled.push(t)},r.prototype.show=function(t){this.consoleChannels.indexOf(t)===-1&&this.consoleChannels.push(t)},r.prototype.hide=function(t){var e=this.consoleChannels.indexOf(t);e>-1&&this.consoleChannels.splice(e,1)},r.prototype.view=function(t){var e=this;t=Array.prototype.slice.call(arguments),this.messages.forEach(function(n){(!t.length||t.indexOf(n.channel)>-1)&&e.displayLine(n)})},r.prototype.displayLine=function(t){window.console=window.console||{},window.console.log=window.console.log||function(){},Function.prototype.bind.call(console.log,console).bind(console,t.date,"["+t.level.toUpperCase()+"]",t.channel,"-").apply(console,t.message)},r.prototype.debug=function(t,e){this.log.bind(this,"debug").apply(this,arguments)},r.prototype.info=function(t,e){this.log.bind(this,"info ").apply(this,arguments)},r.prototype.warn=function(t,e){this.log.bind(this,"warn ").apply(this,arguments)},r.prototype.error=function(t,e){this.log.bind(this,"error").apply(this,arguments)}},{}],60:[function(t,e,n){var r=window,i={TEXT:1,DMO:2},o=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return r[t[e]+"MutationObserver"];return!1}(),s=o?i.DMO:i.TEXT;document.querySelector("html").className.indexOf("idz_mirroring_refresh_")>=0&&(s=i.TEXT),e.exports={TEXT:i.TEXT,DMO:i.DMO,getMethod:function(){return s},getMethodName:function(){return s===i.DMO?"dmo":"text"},setMethod:function(t){s=t},isDMO:function(){return s===i.DMO}}},{}],61:[function(t,e,n){function r(t,e){if(0===t.indexOf("https")||0===t.indexOf("data:"))return t;0===t.indexOf("//")&&(t="http:"+t);var n=encodeURIComponent(t);return(e?l.hosts.rewrite:l.hosts.proxify)+"?url="+n}function i(t){return t=t||"",t=t.replace(d,""),l.hosts.base+t}function o(t){return f||(f=document.createElement("a")),f.href=t||"#",t?f.href:f.href.slice(0,-1)}function s(t,e){var n=o(e);if(e&&(0===e.indexOf("//")||0===e.indexOf("http")||0===e.indexOf("data:"))||n.indexOf("baseproxy")>=0)return n;f.href=t;var r=f.protocol+"//"+f.host;f.href=n;var i=f.pathname+f.search+f.hash;return r+(0!==f.pathname.indexOf("/")?"/":"")+i}function a(t,e){return t=t.toLowerCase(),e=e.toLowerCase(),l.proxyfiedTags[t]&&void 0!==l.proxyfiedTags[t][e]}function c(t,e){return t.replace(p,function(t,n,i){return"url("+(n=n||'"')+r(s(e,i),!1)+n+")"})}function h(t,e){var n=null;return u.each(l.proxyfiedTags,function(i,o){u.each(o,function(o,a){n=new RegExp("(<"+i+"[^>]+?"+o+"=)['\"]([^'\"]+)['\"]","gi"),t=t.replace(n,function(t,n,i){return n+'"'+r(s(e,i),a)+'"'})})}),t=c(t,e)}var l=t("./../config.js").proxy,u=iAdvize.$||jQuery,f=null,d=/(http|https):\/\//gi,p=/url\s*\(\s*(['"]|(?:&quot;))*\s*([^\)'"]*?)\s*(?:['"]|(?:&quot;))*\s*\)/gi;e.exports={securizeUrl:r,securizeBaseUrl:i,toAbsolute:o,isProxyfiedAttribute:a,convertContent:c,convertText:h}},{"./../config.js":53}],62:[function(t,e,n){var r=t("../config").socket,i=t("./logger"),o=r.host+"/"+r.vuid+"/"+r.websiteId,s=null;io=t("socket.io-client");var a={query:"vuid="+r.vuid+"&websiteId="+r.websiteId,port:443};n.connect=function(t){return s||(a.transports=["websocket"],s=io(o,a),i.info("socket","Socket connecting to",o,a),iAdvize&&!iAdvize.chaturl&&window.parent&&window.parent.iAdvize&&(window.parent.iAdvize.socket=s),s.on("error",function(t){i.error("socket","Error connecting socket",t)}),s.on("reconnecting",function(t){i.warn("socket","Reconnecting socket",t)}),s.on("reconnect_error",function(t){i.error("socket","Error reconnecting socket",t)}),s.on("closeSocket",function(){t||(s.emit("closeSocket"),i.info("socket","Emit closeSocket"))})),s}},{"../config":53,"./logger":59,"socket.io-client":37}],63:[function(t,e,n){"use strict";function r(t){for(var e=0,n=t.length;e<n;e++)t[e]=String.fromCharCode(t[e]);return t.join("")}function i(t){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t.charCodeAt(n);return e}var o=t("../lib/Iuppiter"),s=t("utf8-decode");e.exports={compress:function(t,e){var n="0",i=t;if(e){var s=o.compress(t);s.length<t.length&&(n="1",i=r(s))}return n+i},decompress:function(t){var e,n=t.charAt(0);return t=t.slice(1),"1"===n?e=s(o.decompress(i(t),!1)):"0"===n&&(e=t),e}}},{"../lib/Iuppiter":64,"utf8-decode":50}],64:[function(t,e,n){var r={version:"$Revision: 3026 $".substring(11).replace(" $","")};r.toByteArray=function(t){var e,n,r=[];for(e=0;e<t.length;e++)n=t.charCodeAt(e),n<=127?r.push(n):n<=2047?(r.push(n>>6|192),r.push(63&n|128)):n<=65535?(r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)):(r.push(n>>18|240),r.push(n>>12&63|128),r.push(n>>6&63|128),r.push(63&n|128));return r},r.Base64={CA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",CAS:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",IA:new Array(256),IAS:new Array(256),init:function(){var t;for(t=0;t<256;t++)r.Base64.IA[t]=-1,r.Base64.IAS[t]=-1;for(t=0,iS=r.Base64.CA.length;t<iS;t++)r.Base64.IA[r.Base64.CA.charCodeAt(t)]=t,r.Base64.IAS[r.Base64.CAS.charCodeAt(t)]=t;r.Base64.IA["="]=r.Base64.IAS["="]=0},encode:function(t,e){var n,i,o,s,a,c,h,l,u,f
;for(n=e?r.Base64.CAS:r.Base64.CA,o=t.constructor==Array?t:r.toByteArray(t),s=o.length,a=s/3*3,c=(s-1)/3+1<<2,i=new Array(c),h=0,l=0;h<a;)f=(255&o[h++])<<16|(255&o[h++])<<8|255&o[h++],i[l++]=n.charAt(f>>18&63),i[l++]=n.charAt(f>>12&63),i[l++]=n.charAt(f>>6&63),i[l++]=n.charAt(63&f);return u=s-a,u>0&&(f=(255&o[a])<<10|(2==u?(255&o[s-1])<<2:0),i[c-4]=n.charAt(f>>12),i[c-3]=n.charAt(f>>6&63),i[c-2]=2==u?n.charAt(63&f):"=",i[c-1]="="),i.join("")},decode:function(t,e){var n,i,o,s,a,c,h,l,u,f,d,p,g,v,m,y;for(n=e?r.Base64.IAS:r.Base64.IA,t.constructor==Array?(o=t,a=!0):(o=r.toByteArray(t),a=!1),s=o.length,c=0,h=s-1;c<h&&n[o[c]]<0;)c++;for(;h>0&&n[o[h]]<0;)h--;for(l="="==o[h]?"="==o[h-1]?2:1:0,u=h-c+1,f=s>76?("\r"==o[76]?u/78:0)<<1:0,d=(6*(u-f)>>3)-l,i=new Array(d),p=0,g=0,eLen=d/3*3;p<eLen;)v=n[o[c++]]<<18|n[o[c++]]<<12|n[o[c++]]<<6|n[o[c++]],i[p++]=v>>16&255,i[p++]=v>>8&255,i[p++]=255&v,f>0&&19==++g&&(c+=2,g=0);if(p<d){for(v=0,m=0;c<=h-l;m++)v|=n[o[c++]]<<18-6*m;for(y=16;p<d;y-=8)i[p++]=v>>y&255}if(a)return i;for(v=0;v<i.length;v++)i[v]=String.fromCharCode(i[v]);return i.join("")}},r.Base64.init();r.compress=function(t){var e,n,i,o,s,a,c,h,l=[],u=0,f=0,d=128,p=new Array(256);for(h=0;h<256;h++)p[h]=3435973836;for(t.constructor==Array?(e=t,!0):(e=r.toByteArray(t),!1),n=e.length;u<n;){if(256==(d<<=1)){if(f>=n-1-16){for(s=n,u=0,f=0;s;s--)l[f++]=e[u++];return l}d=1,o=f,l[f++]=0}if(u>n-66)l[f++]=e[u++];else if(c=255&(e[u]+13^e[u+1]-13^e[u+2]),a=u-p[c]&1023,p[c]=u,(i=u-a)>=0&&i!=u&&e[u]==e[i]&&e[u+1]==e[i+1]&&e[u+2]==e[i+2]){for(l[o]|=d,s=3;s<66&&e[u+s]==e[i+s];s++);l[f++]=s-3<<2|a>>8,l[f++]=a,u+=s}else l[f++]=e[u++]}return l},r.decompress=function(t,e){var n,i,o,s,a,c,h,l,u,f=[],d=0,p=0,g=128;for(t.constructor==Array?(n=t,l=!0):(n=r.toByteArray(t),l=!1),l=void 0!==e&&e,i=n.length,u=function(){if(l)return f;for(h=0;h<p;h++)f[h]=String.fromCharCode(f[h]);return f.join("")};d<i;)if(256==(g<<=1)&&(g=1,s=n[d++]),s&g){if(a=3+(n[d]>>2),c=1023&(n[d]<<8|n[d+1]),d+=2,!((o=p-c)>=0))return u();for(;--a>=0;)f[p++]=f[o++]}else f[p++]=n[d++];return u()},e.exports=r},{}],65:[function(e,n,r){!function(e){"use strict";function n(t){return!t[v]&&(t[v]=m++,!0)}function r(){this.map_={}}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function o(t,e,n,r){this.rootNode=t,this.elementFilter=e,this.calcReordered=n,this.calcOldPreviousSibling=r}function s(e){function n(){o&&(s&&(o.qualifiers.push(s),s=t),c.push(o)),o={qualifiers:[]}}function r(){s&&o.qualifiers.push(s),s={}}function i(t){return'"'+t.replace(/"/,'\\"')+'"'}for(var o,s,a,c=[],h="Invalid or unsupported selector syntax.",l=1,u=0;u<e.length;){var f=e[u++];switch(l){case 1:if(f.match(A)){n(),o.tagName=f,l=2;break}if("*"==f){n(),o.tagName="*",l=3;break}if("."==f){n(),r(),o.tagName="*",s.class=!0,l=4;break}if("#"==f){n(),r(),o.tagName="*",s.id=!0,l=4;break}if("["==f){n(),r(),o.tagName="*",s.attrName="",l=6;break}if(f.match(/\s/))break;throw Error(h);case 2:if(f.match(C)){o.tagName+=f;break}if("."==f){r(),s.class=!0,l=4;break}if("#"==f){r(),s.id=!0,l=4;break}if("["==f){r(),s.attrName="",l=6;break}if(f.match(/\s/)){l=14;break}if(","==f){l=1;break}throw Error(h);case 3:if("."==f){r(),s.class=!0,l=4;break}if("#"==f){r(),s.id=!0,l=4;break}if("["==f){r(),s.attrName="",l=6;break}if(f.match(/\s/)){l=14;break}if(","==f){l=1;break}throw Error(h);case 4:if(f.match(A)){s.attrValue=f,l=5;break}throw Error(h);case 5:if(f.match(C)){s.attrValue+=f;break}if("."==f){r(),s.class=!0,l=4;break}if("#"==f){r(),s.id=!0,l=4;break}if("["==f){r(),l=6;break}if(f.match(/\s/)){l=14;break}if(","==f){l=1;break}throw Error(h);case 6:if(f.match(A)){s.attrName=f,l=7;break}if(f.match(/\s/))break;throw Error(h);case 7:if(f.match(C)){s.attrName+=f;break}if(f.match(/\s/)){l=8;break}if("~"==f){s.contains=!0,l=9;break}if("="==f){s.attrValue="",l=11;break}if("]"==f){l=3;break}throw Error(h);case 8:if("~"==f){s.contains=!0,l=9;break}if("="==f){s.attrValue="",l=11;break}if("]"==f){l=3;break}if(f.match(/\s/))break;throw Error(h);case 9:if("="==f){s.attrValue="",l=11;break}throw Error(h);case 10:if("]"==f){l=3;break}if(f.match(/\s/))break;throw Error(h);case 11:if(f.match(/\s/))break;if('"'==f||"'"==f){a=f,l=13;break}s.attrValue+=f,l=12;break;case 12:if(f.match(/\s/)){l=10;break}if("]"==f){l=3;break}if("'"==f||'"'==f)throw Error(h);s.attrValue+=f;break;case 13:if(f==a){l=10;break}s.attrValue+=f;break;case 14:if(f.match(/\s/))break;if(","==f){l=1;break}throw Error(h)}}switch(l){case 1:case 2:case 3:case 5:case 14:n();break;default:throw Error(h)}if(!c.length)throw Error(h);return c.forEach(function(t){var e=t.tagName.toUpperCase();t.tagName!=e&&(t.caseInsensitiveTagName=e);var n=t.tagName;t.qualifiers.forEach(function(t){if(t.class)n+="."+t.attrValue;else if(t.id)n+="#"+t.attrValue;else{var e=t.attrName.toLowerCase();t.attrName!=e&&(t.caseInsensitiveAttrName=e),t.contains?n+="["+t.attrName+"~="+i(t.attrValue)+"]":(n+="["+t.attrName,t.hasOwnProperty("attrValue")&&(n+="="+i(t.attrValue)),n+="]")}}),t.selectorString=n}),c}function a(t){if("string"!=typeof t)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(t=t.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!t.match(S))throw Error("Invalid request option. invalid attribute name: "+t);return t}function c(t){if(!t.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var e={},n={},r=t.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(o){var o=a(o);if(e.hasOwnProperty(o.toLowerCase()))throw Error("Invalid request option: observing multiple case varitations of the same attribute is not supported.");n[o]=!0,e[o.toLowerCase()]=!0}}return Object.keys(n)}function h(t){var e={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},n={};for(var r in t)if(!(r in e))throw Error("Invalid option: "+r);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(n.callback=t.callback,n.rootNode=t.rootNode||document,n.observeOwnChanges=t.observeOwnChanges,n.oldPreviousSibling=t.oldPreviousSibling,!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");n.queries=[];for(var i=0;i<t.queries.length;i++){var o=t.queries[i];if(o.all){if(Object.keys(o).length>1)throw Error("Invalid request option. all has no options.");n.queries.push({all:!0})}else if(o.hasOwnProperty("attribute")){var h={attribute:a(o.attribute)};if(h.elementFilter=s("*["+h.attribute+"]"),Object.keys(o).length>1)throw Error("Invalid request option. attribute has no options.");n.queries.push(h)}else if(o.hasOwnProperty("element")){var l=Object.keys(o).length,h={element:o.element,elementFilter:s(o.element)};if(o.hasOwnProperty("elementAttributes")&&(h.elementAttributes=c(o.elementAttributes),l--),l>1)throw Error("Invalid request option. element only allows elementAttributes option.");n.queries.push(h)}else{if(!o.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(o).length>1)throw Error("Invalid request option. characterData has no options.");n.queries.push({characterData:!0})}}return n}function l(t){var e={};return t.forEach(function(t){t.qualifiers.forEach(function(t){t.class?e.class=!0:t.id?e.id=!0:e[t.attrName]=!0})}),Object.keys(e)}function u(e){function n(e){if(!i.attributes||r){if(i.attributes=!0,i.attributeOldValue=!0,!e)return void(r=t);r=r||{},e.forEach(function(t){r[t]=!0,r[t.toLowerCase()]=!0})}}var r,i={childList:!0,subtree:!0};return e.forEach(function(t){if(t.characterData)return i.characterData=!0,void(i.characterDataOldValue=!0);if(t.all)return n(),i.characterData=!0,void(i.characterDataOldValue=!0);if(t.attribute)return void n([t.attribute.trim()]);t.elementFilter&&t.elementFilter.some(function(t){return t.className})&&n(["class"]);var e=l(t.elementFilter).concat(t.elementAttributes||[]);e.length&&n(e)}),r&&(i.attributeFilter=Object.keys(r)),i}function f(t,e,n){t.elementFilter=n.elementFilter,t.filterCharacterData=n.characterData;var r={target:e,type:"summary",added:[],removed:[]};if(r.getOldParentNode=t.getOldParentNode.bind(t),(n.all||n.element)&&(r.reparented=[]),n.all&&(r.reordered=[]),t.getChanged(r),n.all||n.attribute||n.elementAttributes){var i=n.attribute?[n.attribute]:n.elementAttributes,o=t.getAttributesChanged(i);n.attribute?(r.valueChanged=[],o[n.attribute]&&(r.valueChanged=o[n.attribute]),r.getOldAttribute=function(e){return t.getOldAttribute(e,n.attribute)}):(r.attributeChanged=o,n.elementAttributes&&n.elementAttributes.forEach(function(t){r.attributeChanged.hasOwnProperty(t)||(r.attributeChanged[t]=[])}),r.getOldAttribute=t.getOldAttribute.bind(t))}if(n.all||n.characterData){var s=t.getCharacterDataChanged();r.getOldCharacterData=t.getOldCharacterData.bind(t),n.characterData?r.valueChanged=s:r.characterDataChanged=s}return r.reordered&&(r.getOldPreviousSibling=t.getOldPreviousSibling.bind(t)),r}function d(e){function n(){b.forEach(function(t){t&&t.recordPreviousState()})}function r(t){b.forEach(function(e,n){e&&e.validate(t[n])})}function i(t){if(!t||!t.length)return[];var e=new o(p,m,y,c.oldPreviousSibling);return e.processMutations(t),c.queries.map(function(t){return f(e,p,t)})}function s(t){return t.some(function(t){if(["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some(function(e){return t[e]&&t[e].length}))return!0;if(t.attributeChanged){if(Object.keys(t.attributeChanged).some(function(e){return t.attributeChanged[e].length}))return!0}return!1})}var a=!1,c=h(e),l=u(c.queries),p=c.rootNode,v=c.callback,m=Array.prototype.concat.apply([],c.queries.map(function(t){return t.elementFilter?t.elementFilter:[]}));m.length||(m=t);var y=c.queries.some(function(t){return t.all}),b=[];d.createQueryValidator&&(b=c.queries.map(function(t){return d.createQueryValidator(p,t)}));var w=new g(function(t){c.observeOwnChanges||w.disconnect();var e=i(t);r(e),c.observeOwnChanges&&n(),s(e)&&v(e),c.observeOwnChanges||(n(),w.observe(p,l))});this.reconnect=function(){if(a)throw Error("Already connected");w.observe(p,l),a=!0,n()};var _=this.takeSummaries=function(){if(!a)throw Error("Not connected");var t=w.takeRecords(),e=i(t);if(s(e))return e};this.disconnect=function(){var t=_();return w.disconnect(),a=!1,t},this.reconnect()}var p="matchesSelector";"undefined"!=typeof Element&&("webkitMatchesSelector"in Element.prototype?p="webkitMatchesSelector":"mozMatchesSelector"in Element.prototype&&(p="mozMatchesSelector"));var g=function(){for(var t=["WebKit","Moz","O","Ms",""],n=0;n<t.length;n++)if(t[n]+"MutationObserver"in window)return e[t[n]+"MutationObserver"];return!1}();if(g){var v="__mutation_summary_node_map_id__",m=1;r.prototype={set:function(t,e){n(t),this.map_[t[v]]={k:t,v:e}},get:function(t){if(!n(t)){var e=this.map_[t[v]];return e?e.v:void 0}},has:function(t){return!n(t)&&t[v]in this.map_},delete:function(t){n(t)||delete this.map_[t[v]]},keys:function(){var t=[];for(var e in this.map_)t.push(this.map_[e].k);return t}};var y=0,b=1,w=2,_=3,E=4,k=5,x=Array.prototype.forEach.call.bind(Array.prototype.forEach);o.prototype={getChange:function(t){var e=this.changeMap.get(t);return e||(e={target:t},this.changeMap.set(t,e)),t.nodeType==Node.ELEMENT_NODE&&(e.matchCaseInsensitive=t instanceof HTMLElement&&t.ownerDocument instanceof HTMLDocument),e},getParentChange:function(t){var e=this.getChange(t);return e.childList||(e.childList=!0,e.oldParentNode=null),e},handleChildList:function(t){this.childListChanges=!0,x(t.removedNodes,function(e){var n=this.getParentChange(e);n.added||n.oldParentNode?n.added=!1:n.oldParentNode=t.target},this),x(t.addedNodes,function(t){this.getParentChange(t).added=!0},this)},handleAttributes:function(t){this.attributesChanges=!0;var e=this.getChange(t.target);e.attributes||(e.attributes=!0,e.attributeOldValues={});var n=e.attributeOldValues;i(n,t.attributeName)||(n[t.attributeName]=t.oldValue)},handleCharacterData:function(t){this.characterDataChanges=!0;var e=this.getChange(t.target);e.characterData||(e.characterData=!0,e.characterDataOldValue=t.oldValue)},processMutations:function(e){function n(t){if(f.calcOldPreviousSibling){f.processChildlistChanges();var e=t.parentNode,n=f.changeMap.get(t);n&&n.oldParentNode&&(e=n.oldParentNode),n=f.childlistChanges.get(e),n||(n={oldPrevious:new r},f.childlistChanges.set(e,n)),n.oldPrevious.has(t)||n.oldPrevious.set(t,t.previousSibling)}}function i(e,r){if(!u.has(e)){u.set(e,!0);var d=f.changeMap.get(e),p=r;if((d&&d.childList||p==t)&&(p=h(e)),p!=y){if(c(e),p==b)o.push(e);else if(p==_)s.push(e),n(e);else if(p==w){var g=w;d&&d.childList&&(d.oldParentNode!==e.parentNode?(g=E,n(e)):f.calcReordered&&l(e)&&(g=k)),a.set(e,g)}if(p!=w)for(var v=e.firstChild;v;v=v.nextSibling)i(v,p)}}}this.mutations=e,this.changeMap=new r,this.mutations.forEach(function(t){switch(t.type){case"childList":this.handleChildList(t);break;case"attributes":this.handleAttributes(t);break;case"characterData":this.handleCharacterData(t)}},this);var o=this.entered=[],s=this.exited=[],a=this.stayedIn=new r;if(this.childListChanges||this.attributesChanges){var c=this.matchabilityChange.bind(this),h=this.reachabilityChange.bind(this),l=this.wasReordered.bind(this),u=new r,f=this;this.changeMap.keys().forEach(function(t){i(t)})}},getChanged:function(t){var e=this.matchabilityChange.bind(this);this.entered.forEach(function(n){var r=e(n);r!=b&&r!=w||t.added.push(n)}),this.stayedIn.keys().forEach(function(n){var r=e(n);if(r==b)t.added.push(n);else if(r==_)t.removed.push(n);else if(r==w&&(t.reparented||t.reordered)){var i=this.stayedIn.get(n);t.reparented&&i==E?t.reparented.push(n):t.reordered&&i==k&&t.reordered.push(n)}},this),this.exited.forEach(function(n){var r=e(n);r!=_&&r!=w||t.removed.push(n)})},getOldParentNode:function(t){var e=this.changeMap.get(t);if(e&&e.childList)return e.oldParentNode?e.oldParentNode:null;var n=this.reachabilityChange(t);if(n==y||n==b)throw new Error("getOldParentNode requested on invalid node.");return t.parentNode},getOldPreviousSibling:function(t){var e=t.parentNode,n=this.changeMap.get(t);if(n&&n.oldParentNode&&(e=n.oldParentNode),!(n=this.childlistChanges.get(e)))throw new Error("getOldPreviousSibling requested on invalid node.");return n.oldPrevious.get(t)},getOldAttribute:function(t,e){var n=this.changeMap.get(t);if(!n||!n.attributes)throw new Error("getOldAttribute requested on invalid node.");if(n.matchCaseInsensitive&&(e=e.toLowerCase()),!i(n.attributeOldValues,e))throw new Error("getOldAttribute requested for unchanged attribute name.");return n.attributeOldValues[e]},getAttributesChanged:function(t){if(!this.attributesChanges)return{};var e,n;t&&(e={},n={},t.forEach(function(t){e[t]=!0;var r=t.toLowerCase();t!=r&&(n[r]=t)}));for(var r={},i=this.changeMap.keys(),o=0;o<i.length;o++){var s=i[o],a=this.changeMap.get(s);if(a.attributes&&(w==this.reachabilityChange(s)&&w==this.matchabilityChange(s))){var c=s,h=a.attributeOldValues;Object.keys(h).forEach(function(t){var i=t;a.matchCaseInsensitive&&n&&n[t]&&(i=n[t]),e&&!e[i]||c.getAttribute(t)!=h[t]&&(r[i]||(r[i]=[]),r[i].push(c))})}}return r},getOldCharacterData:function(t){var e=this.changeMap.get(t);if(!e||!e.characterData)throw new Error("getOldCharacterData requested on invalid node.");return e.characterDataOldValue},getCharacterDataChanged:function(){if(!this.characterDataChanges)return[];for(var t=this.changeMap.keys(),e=[],n=0;n<t.length;n++){var r=t[n];if(w==this.reachabilityChange(r)&&w==this.matchabilityChange(r)){var i=this.changeMap.get(r);i.characterData&&r.textContent!=i.characterDataOldValue&&e.push(r)}}return e},reachabilityChange:function(e){function n(t){var e=a.get(t);if(e&&e.childList){if(e.oldParentNode)return e.oldParentNode;if(e.added)return null}return t.parentNode}function i(e){if(e===s)return!0;if(!e)return!1;var n=c.get(e);return n===t&&(n=i(e.parentNode),c.set(e,n)),n}function o(e){if(e===s)return!0;if(!e)return!1;var r=h.get(e);return r===t&&(r=o(n(e)),h.set(e,r)),r}this.reachableCache=this.reachableCache||new r,this.wasReachableCache=this.wasReachableCache||new r;var s=this.rootNode,a=this.changeMap,c=this.reachableCache,h=this.wasReachableCache;return i(e)?o(e)?w:b:o(e)?_:y},checkWasMatching:function(t,e,n){var r=this.changeMap.get(t);if(!r||!r.attributeOldValues)return n;var o=e.tagName;if(r.matchCaseInsensitive&&"*"!=o&&i(e,"caseInsensitiveTagName")&&(o=e.caseInsensitiveTagName),"*"!=o&&o!=t.tagName)return!1;var s=r.attributeOldValues;if(!e.qualifiers.some(function(t){return t.class?i(s,"class"):t.id?i(s,"id"):r.matchCaseInsensitive&&i(t,"caseInsensitiveAttrName")?i(s,t.caseInsensitiveAttrName):i(s,t.attrName)}))return n;for(var a=0;a<e.qualifiers.length;a++){var c,h=e.qualifiers[a];c=h.class?"class":h.id?"id":r.matchCaseInsensitive&&i(h,"caseInsensitiveAttrName")?h.caseInsensitiveAttrName:h.attrName;var l=!!h.class||h.contains,u=i(s,c)?s[c]:t.getAttribute(c);if(null==u)return!1;if(h.hasOwnProperty("attrValue")){if(!l&&h.attrValue!==u)return!1;if(!u.split(" ").some(function(t){return t==h.attrValue}))return!1}}return!0},matchabilityChange:function(e){function n(e){this.matchCache||(this.matchCache={}),this.matchCache[e.selectorString]||(this.matchCache[e.selectorString]=new r);var n=this.matchCache[e.selectorString],o=n.get(i);if(o!==t)return o;var s=i[p](e.selectorString),a=this.checkWasMatching(i,e,s);return o=s?a?w:b:a?_:y,n.set(i,o),o}if(this.filterCharacterData)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return w;default:return y}if(!this.elementFilter)return w;if(e.nodeType!==Node.ELEMENT_NODE)return y;for(var i=e,o=this.elementFilter.map(n,this),s=y,a=0;s!=w&&a<o.length;){switch(o[a]){case w:s=w;break;case b:s=s==_?w:b;break;case _:s=s==b?w:_}a++}return s},processChildlistChanges:function(){function t(t){var n=e.get(t);return n||(n={added:new r,removed:new r,maybeMoved:new r,oldPrevious:new r},e.set(t,n)),n}if(!this.childlistChanges){var e=this.childlistChanges=new r,n=this.reachabilityChange.bind(this),i=this;this.mutations.forEach(function(e){function r(t,e){!t||o.oldPrevious.has(t)||o.added.has(t)||o.maybeMoved.has(t)||e&&(o.added.has(e)||o.maybeMoved.has(e))||o.oldPrevious.set(t,e)}if("childList"==e.type&&(n(e.target)==w||i.calcOldPreviousSibling)){var o=t(e.target),s=e.previousSibling;x(e.removedNodes,function(t){r(t,s),o.added.has(t)?o.added.delete(t):(o.removed.set(t,!0),o.maybeMoved.delete(t,!0)),s=t}),r(e.nextSibling,s),x(e.addedNodes,function(t){o.removed.has(t)?(o.removed.delete(t),o.maybeMoved.set(t,!0)):o.added.set(t,!0)})}})}},wasReordered:function(e){function n(e){if(!e)return!1;if(!a.maybeMoved.has(e))return!1;var n=c.get(e);return n!==t?n:(h.has(e)?n=!0:(h.set(e,!0),n=o(e)!==i(e)),h.has(e)?(h.delete(e),c.set(e,n)):n=c.get(e),n)}function i(e){var r=l.get(e);if(r!==t)return r;for(r=a.oldPrevious.get(e);r&&(a.removed.has(r)||n(r));)r=i(r);return r===t&&(r=e.previousSibling),l.set(e,r),r}function o(t){if(u.has(t))return u.get(t);for(var e=t.previousSibling;e&&(a.added.has(e)||n(e));)e=e.previousSibling;return u.set(t,e),e}if(!this.childListChanges)return!1;this.processChildlistChanges();var s=e.parentNode,a=this.changeMap.get(e);if(a&&a.oldParentNode&&(s=a.oldParentNode),!(a=this.childlistChanges.get(s)))return!1;if(a.moved)return a.moved.get(e);var c=a.moved=new r,h=new r,l=new r,u=new r;return a.maybeMoved.keys().forEach(n),a.moved.get(e)}};var A=/[a-zA-Z_]+/,C=/[a-zA-Z0-9_\-]+/,S=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;e.MutationSummary=d,e.MutationSummary.NodeMap=r,e.MutationSummary.parseElementFilter=s}}(window)},{}],66:[function(t,e,n){iAdvize.define("mirror",function(e,n){var r,i,o=iAdvize,s=(t("./MagicEvent.js"),!1);n.init=function(e){var n=o.$.Deferred();return i=o.require("xmpp"),s?(n.resolve(),n.promise()):(s=!0,"v2"===e&&t("./projector/dom.js").start(),r=t("./projector/events.js").start("v2"===e,n.resolve,i),n.promise())},n.disable=function(){r&&r.changeState&&r.changeState("disabled")},n.isReceiver=function(){return r&&r.opts&&"receiver"===r.opts.mode},n.state=function(t){r&&r.changeState&&r.changeState(t)},n.receiverDispatcher=function(t){r.receiverDispatcher(t)},n.exclude=function(t){r&&r.updateElToExclude&&r.updateElToExclude(t)}})},{"./MagicEvent.js":52,"./projector/dom.js":67,"./projector/events.js":68}],67:[function(t,e,n){function r(){o=s.connect(!0),o.on("connect",function(){a.info("socket","Connected socket with id",o.io.engine.id),o.emit("projector",c.getMethod()),a.info("socket","Emit projector",c.getMethod())}),o.on("method",function(t,e){a.info("handshake","Received method",t),c.setMethod(t),e&&e()}),o.on("start",function(){a.info("handshake","Transport :",o.io.engine.transport.name),a.info("handshake","Method :",c.getMethod()),i&&i.disconnect(),i=new(u[c.getMethodName()])(document,l)}),o.on("disconnect",function(){a.info("socket","Socket disconnect"),i&&i.disconnect(),i=null}),o.on("isPageReloaded",function(){setTimeout(function(){o.emit("isPageReloaded",!0)},500)})}var i,o,s=(t("json3"),t("../inc/socket")),a=t("../inc/logger"),c=t("../inc/methods"),h=t("../config").dom;n.start=r;var l={excludedElements:h.excludedElements.join(",")},u={text:t("./tree/text"),dmo:t("./tree/dmo")}},{"../config":53,"../inc/logger":59,"../inc/methods":60,"../inc/socket":62,"./tree/dmo":69,"./tree/text":71,json3:32}],68:[function(t,e,n){function r(){this._magicEvent.$frame=this._magicEvent.opts.jQuery.find("html")}function i(t,e){var n=p.operator.barejid||p.monitor_jid;return!!n&&(1!=p.paused&&1!=p.opOffline&&(!!e.getConnection().connected&&(""!=p.iframeID&&(t=c.parse(t),t.iframe=p.iframeID,t=c.stringify(t)),void e.getConnection().send($msg({to:n+"/operators",from:e.getConnection().jid,type:"command",website:p.website_id}).c("body").t("!magic_event "+t)))))}function o(t,e,n){return p.$("html.idz_mirroring_disabled").length>0?null:(s=new l(g),s.changeState("disabled"),s.updateSenderMethod(function(e){t?a.emit("action",e):i(e,n)}),s.editEventHandler("scroll","onReceive",f.onScrollReceived).editEventHandler("click","onReceive",f.onClickReceived,"after").editEventHandler("resize","onReceive",f.onResizeReceived).editEventHandler("mousemove","onReceive",f.onMouseMoveReceived).editEventHandler("resize","enable",r,"after"),a=h.connect(!0),a.on("action",function(t){s.receiverDispatcher(t)}),a.on("start",function(){"disabled"===s.opts.mode&&s.changeState("sender"),e()}),a.on("stop",function(){s.changeState("disabled")}),s)}var s,a,c=t("json3"),h=t("../inc/socket"),l=t("../MagicEvent"),u=t("../config").events,f=t("../inc/events"),d=t("../elements/inputs")(iAdvize.$||jQuery).projector.events,p=iAdvize;n.start=o;var g={elToExclude:u.excludedElements.join(","),eventToSender:u.handledEvents,eventToReceiver:u.handledEvents,jQuery:function(){function t(t){return t.split(".").map(function(t){return("0"+t).slice(-2)}).join(".")}if(!$||!$.fn||!$.fn.jquery)return iAdvize.$;var e=t(iAdvize.$.fn.jquery);return t($.fn.jquery)>e?$:iAdvize.$}(),onSenderEnable:function(){this.forceEventHandler("resize"),this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").hide(),d.onMirroringEnabled(this.opts._$elToObserve)},onReceiverEnable:function(){this.opts._$elToObserve.find("#anim_clic").css({top:"-3000px",left:"-3000px"}),this.opts._$elToObserve.find("#visitor_cursor").show(),this.getEventHandler("resize").enable(),d.onCobrowsingEnabled(this.opts._$elToObserve)},onReceiverDisable:function(){this.opts._$elToObserve.find("#visitor_cursor").hide(),this.getEventHandler("resize").disable()}}},{"../MagicEvent":52,"../config":53,"../elements/inputs":57,"../inc/events":58,"../inc/socket":62,json3:32}],69:[function(e,n,r){function i(t,e){if(this.target=t,this.options=e,this.emitter=new p,s("html.idz_mirroring_disabled").length>0)return void this.emitter.sendDisabledMessage();this.knownNodes=new MutationSummary.NodeMap,this.observers=[s.noop()],this.canvasData=u.getInitialData();for(var n,r=this.serializeNode(t).id,i=[],o=t.firstChild;o;o=o.nextSibling)null!==(n=this.serializeNode(o,!0))&&i.push(n);this.emitter.sendInitMessage(r,i),this.observeElement(t,0)}function o(t,e,n){var r=[];return t.forEach(function(t){var i=e.call(n,t);null!==i&&r.push(i)}),r}e("../../lib/mutationSummary");var s=iAdvize.$||jQuery,a=e("../../inc/proxy"),c=e("../../inc/logger"),h=e("../../config").dom,l=e("../../elements/hiddenElements")(h,s).projector.dmo,u=e("../../elements/canvas")(h.canvas,s).projector.dmo,f=e("../../elements/iframes")(c,s).projector.dmo,d=e("../../elements/inputs")(s).projector.dmo,p=e("./emitter"),g={FIRST:"first",LAST:"last",RANGE:"range"};n.exports=i,i.prototype={nextId:1,observeElement:function(t,e){this.observers[e]=new MutationSummary({rootNode:t,callback:s.proxy(this.applyChanged,this),queries:[{all:!0}]})},isNodeExcluded:function(t){var e;return t.nodeType===Node.ELEMENT_NODE?e=s(t):t.nodeType===Node.TEXT_NODE&&(e=s(t).parent()),e&&e.closest(this.options.excludedElements).length},disconnect:function(){this.observers.forEach(function(t){t.disconnect()})},rememberNode:function(t){var e=this.nextId++;return this.knownNodes.set(t,e),e},forgetNode:function(t){delete this.knownNodes.delete(t)},serializeNode:function(e,n,r){if(null===e)return null;if(e.nodeType===Node.COMMENT_NODE)return null;if(r&&this.isNodeExcluded(r))return null;if(this.isNodeExcluded(e))return null;var i=this.knownNodes.get(e);if(i!==t)return i;var o=!0,c={nodeType:e.nodeType};switch(c.nodeType){case Node.DOCUMENT_TYPE_NODE:c.name=e.name,c.publicId=e.publicId,c.systemId=e.systemId;break;case Node.COMMENT_NODE:case Node.TEXT_NODE:c.textContent=e.textContent;break;case Node.ELEMENT_NODE:c.tagName=e.tagName,c.attributes={};for(var h=0;h<e.attributes.length;h++){var p=e.attributes.item(h);a.isProxyfiedAttribute(e.tagName,p.name)?c.attributes[p.name]=a.toAbsolute(p.value):c.attributes[p.name]=p.value}if(c.isHidden=l.isHidden(e),c.isHidden&&(o=!1,"INPUT"!==c.tagName)){c=l.changeNodeAttributes(c,s(e));break}if(d.serialize(c,e),"CANVAS"===e.tagName&&u.serialize(this.canvasData,r),"IFRAME"===e.tagName&&f.isMirrored(e)){o=!1;var g=s.proxy(this.observeElement,this,e.contentDocument);f.serialize(c,e,this.observers,this.serializeNode,this,g)}if(n&&e.childNodes.length&&!c.isHidden){c.childNodes=[];for(var v=e.firstChild;v;v=v.nextSibling){var m=this.serializeNode(v,!0);null!==m&&c.childNodes.push(m)}}}return o&&(c.id=this.rememberNode(e)),c},serializePreviousNodeOrGetId:function(t){for(;t=t.previousSibling;){var e=this.serializeNode(t);if(e)return e}},serializeAddedAndMoved:function(t){var e=t.added.concat(t.reparented).concat(t.reordered),n=new MutationSummary.NodeMap;e.forEach(function(t){var e=t.parentNode,r=n.get(e);r||(r=new MutationSummary.NodeMap,n.set(e,r)),r.set(t,!0)});var r=[];return n.keys().forEach(function(t){for(var e=n.get(t),i=e.keys();i.length;){for(var o=i[0];o.previousSibling&&e.has(o.previousSibling);)o=o.previousSibling;for(;o&&e.has(o);){var s=this.serializeNode(o);if(null!==s){var a=o===o.parentNode.firstChild,c=o===o.parentNode.lastChild,h={node:s,parentNode:this.serializeNode(o.parentNode),type:a?g.FIRST:c?g.LAST:g.RANGE};h.type===g.RANGE&&(h.previousSibling=this.serializePreviousNodeOrGetId(o)),r.push(h)}e.delete(o),o=o.nextSibling}i=e.keys()}},this),r},serializeAttributeChanges:function(t){var e=new MutationSummary.NodeMap;return Object.keys(t).forEach(function(n){t[n].forEach(function(t){var r=e.get(t);if(!r){var i=this.serializeNode(t);null===i||i.isHidden||(r={node:i,attributes:{}},e.set(t,r))}r&&(r.attributes[n]=t.getAttribute(n))},this)},this),e.keys().map(function(t){return e.get(t)})},serializeCharacterDataChange:function(t){var e=this.serializeNode(t);return null===e?null:{node:e,textContent:t.textContent}},serializeRemovedNodes:function(e,n){return o(n,function(n){var r=e.getOldParentNode(n);return e.removed.indexOf(r)!==-1?null:this.serializeNode(n,t,r)},this)},applyChanged:function(t){var e=t[0],n=this.serializeRemovedNodes(e,e.removed),r=this.serializeAddedAndMoved(e),i=this.serializeAttributeChanges(e.attributeChanged),s=o(e.characterDataChanged,this.serializeCharacterDataChange,this);(n.length||r.length||i.length||s.length)&&this.emitter.sendUpdateMessage(n,r,i,s),e.removed.forEach(this.forgetNode,this)}}},{"../../config":53,"../../elements/canvas":54,"../../elements/hiddenElements":55,"../../elements/iframes":56,"../../elements/inputs":57,"../../inc/logger":59,"../../inc/proxy":61,"../../lib/mutationSummary":65,"./emitter":70}],70:[function(t,e,n){function r(){this.sendMessage({base:a.toAbsolute()}),this.previousMessage={node:null,time:0}}var i=t("json3"),o=t("../../inc/socket"),s=t("../../inc/transport"),a=t("../../inc/proxy");iAdvize.$;e.exports=r,r.prototype.shouldEmit=function(t,e){if(!t.args||t.args.length<4)return!0;if(t.args[0].length)return!0;if(e.indexOf("checked")!==-1)return!0;var n=(new Date).getTime(),r=t.args[2][0]?t.args[2][0].node:0,i=e.length<150,o=r===this.previousMessage.node,s=n-this.previousMessage.time<1e3;return this.previousMessage.node=r,this.previousMessage.time=n,!(o&&i&&s)},r.prototype.sendMessage=function(t){var e=o.connect(!0),n=e.io.engine.transport.name,r=Array.prototype.toJSON;delete Array.prototype.toJSON;var a=i.stringify(t);this.shouldEmit(t,a)&&e.emit("message",s.compress(a,"websocket"===n)),r&&(Array.prototype.toJSON=r)},r.prototype.sendInitMessage=function(){this.sendMessage({f:"initialize",args:Array.prototype.slice.call(arguments)})},r.prototype.sendUpdateMessage=function(){this.sendMessage({f:"applyChanged",args:Array.prototype.slice.call(arguments)})},r.prototype.sendDisabledMessage=function(){this.sendMessage({f:"disable"})}},{"../../inc/proxy":61,"../../inc/socket":62,"../../inc/transport":63,json3:32}],71:[function(t,e,n){function r(t,e){if(this.doc=void 0!==t.documentElement?t:t.ownerDocument,this.options=e,this.emitter=new p,s("html.idz_mirroring_disabled").length>0)return void this.emitter.sendDisabledMessage();this.dmp=new o,this.domPage={},this.iframesData=f.getInitialData(),this.canvasData=u.getInitialData(),this.parseDom(),this.emitter.sendInitMessage(this.domPage);var n=this,r=this.doc.querySelector("html").className.match(/idz_mirroring_refresh_(\d+)/),i=r.length?parseInt(r[1],10):a.textTree.updateInterval;!function t(){n.applyChanged(),n.timeoutID=setTimeout(t,i)}()}var i=t("json3"),o=t("diff-match-patch"),s=iAdvize.$||jQuery,a=t("../../config").dom,c=t("../../inc/logger"),h=t("../../inc/proxy"),l=t("../../elements/hiddenElements")(a,s).projector.text,u=t("../../elements/canvas")(a.canvas,s).projector.text,f=t("../../elements/iframes")(c,s).projector.text,d=t("../../elements/inputs")(s).projector.text,p=t("./emitter");e.exports=r,r.prototype={applyChanged:function(){var t=s.extend(!0,{},this.domPage);this.parseDom();var e=this.patchDomPage(t,this.domPage),n=f.applyPatch(t,this.domPage,e,this.patchDomPage,this.hasChanges,this.serializePatch,this);(this.hasChanges(e)||n)&&this.emitter.sendUpdateMessage(this.serializePatch(e))},disconnect:function(){clearTimeout(this.timeoutID)},parseDom:function(){var t=s(this.doc.documentElement),e=t.find("head"),n=t.find("body");d.serialize(n),u.serialize(this.canvasData),f.serialize(this.iframesData,this.domPage,n,s.proxy(this.serializeDomPage,this,this.options.excludedElements)),l.markAll(),s.extend(this.domPage,this.serializeDomPage(this.options.excludedElements,t,e,n))},getSafeAttributes:function(t){var e={};return s.each(t.attributes,function(t,n){n.name&&0!==n.name.toLowerCase().indexOf("on")&&(e[n.name]=n.value)}),e},cloneElement:function(t){var e=s(document.createElement(t.nodeName)),n=s.parseHTML(t.innerHTML.replace(/<script[^>]*>([\S\s]*?)<\/script\s*>/gi,""));return n&&s.each(n,function(t,n){var r=s(n);r=l.changeNodeAttributes(r),r.find("img").addBack("img").each(function(){var t=s(this);t.attr("src")&&t.attr("src",h.toAbsolute(t.attr("src"))),t.attr("onerror")&&t.removeAttr("onerror")}),e[0].appendChild(r[0])}),e},serializeDomPage:function(t,e,n,r){
var o=this.cloneElement(r[0]);return o.find(t).remove(),{htmlAttr:i.stringify(this.getSafeAttributes(e[0])),headAttr:i.stringify(this.getSafeAttributes(n[0])),bodyAttr:i.stringify(this.getSafeAttributes(r[0])),headHtml:n.html().replace(/<script[^>]*>([\S\s]*?)<\/script\s*>/gi,"")||"",bodyHtml:o.html()||""}},patchDomPage:function(t,e){return{htmlAttr:this.dmp.patch_make(t.htmlAttr,e.htmlAttr),headAttr:this.dmp.patch_make(t.headAttr,e.headAttr),bodyAttr:this.dmp.patch_make(t.bodyAttr,e.bodyAttr),headHtml:this.dmp.patch_make(t.headHtml,e.headHtml),bodyHtml:this.dmp.patch_make(t.bodyHtml,e.bodyHtml)}},hasChanges:function(t){return t.htmlAttr.length||t.headAttr.length||t.bodyAttr.length||t.headHtml.length||t.bodyHtml.length},serializePatch:function(t){return t.htmlAttr=this.dmp.patch_toText(t.htmlAttr),t.headAttr=this.dmp.patch_toText(t.headAttr),t.bodyAttr=this.dmp.patch_toText(t.bodyAttr),t.headHtml=this.dmp.patch_toText(t.headHtml),t.bodyHtml=this.dmp.patch_toText(t.bodyHtml),t}}},{"../../config":53,"../../elements/canvas":54,"../../elements/hiddenElements":55,"../../elements/iframes":56,"../../elements/inputs":57,"../../inc/logger":59,"../../inc/proxy":61,"./emitter":70,"diff-match-patch":9,json3:32}]},{},[66]),e&&(define=e)}();